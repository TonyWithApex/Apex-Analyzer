<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apex Property Analyzer ü¶à</title>
    <meta name="description" content="Exclusive deal analysis training for Apex Academy students. Master ARV and MAO calculations.">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- COLORS & FONTS --- */
        :root {
            --bg-dark: #000000;
            --card-dark: #1a1a1a; 
            --text-light: #f0f0f0;
            --text-faded: #b0b0b0;
            --primary-gradient: linear-gradient(135deg, #FFD700, #FFA500);
            --gold: #FFD700;
            --dark-gold: #B8860B;
            --border-color: #333;
            --success-color: #FFD700;
            --error-color: #F44336;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        /* --- PASSWORD SCREEN --- */
        .password-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .password-screen.hidden {
            display: none;
        }

        .password-container {
            background: var(--card-dark);
            padding: 50px 40px;
            border-radius: 15px;
            text-align: center;
            max-width: 450px;
            width: 90%;
            border: 2px solid var(--gold);
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.3);
        }

        .password-container h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .password-container .shark-icon {
            font-size: 4em;
            margin: 20px 0;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .password-container p {
            color: var(--text-faded);
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .password-input {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: #252525;
            color: var(--text-light);
            font-size: 1.1em;
            text-align: center;
            transition: all 0.3s;
        }

        .password-input:focus {
            border-color: var(--gold);
            outline: none;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }

        .password-submit {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 8px;
            background: var(--primary-gradient);
            color: #000;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .password-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        .password-error {
            color: var(--error-color);
            margin-top: 15px;
            font-weight: 600;
            display: none;
        }

        .password-error.show {
            display: block;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* --- MAIN APP --- */
        .main-app {
            display: none;
        }

        .main-app.unlocked {
            display: block;
        }

        .container {
            max-width: 100%;
            margin: 0;
            padding: 30px;
        }

        /* --- HEADER & FOOTER --- */
        header {
            background: var(--card-dark);
            padding: 20px 0;
            border-bottom: 2px solid var(--gold);
            box-shadow: 0 2px 10px rgba(255, 215, 0, 0.2);
        }

        .header-content {
            max-width: 100%;
            margin: 0 auto;
            padding: 0 30px;
        }

        header h1 {
            font-size: 2.5em;
            font-weight: 700;
            margin: 0;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        header p {
            color: var(--text-faded);
            margin: 5px 0 0;
        }

        .shark-badge {
            display: inline-block;
            font-size: 1.5em;
            margin-right: 10px;
        }

        footer {
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
            border-top: 1px solid var(--border-color);
            color: var(--text-faded);
            font-size: 0.9em;
        }

        /* --- TWO COLUMN LAYOUT --- */
        .two-column-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        /* --- CARD STRUCTURE --- */
        .card {
            background: var(--card-dark);
            padding: 30px;
            margin-bottom: 25px;
            border-radius: 10px;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 1.8em;
            margin-top: 0;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--gold);
            color: var(--text-light);
        }

        .section-subtitle {
            margin-top: 20px;
            color: var(--text-light);
        }

        /* --- PROPERTY DETAILS --- */
        .property-details-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .detail-label {
            display: block;
            font-size: 0.85em;
            color: var(--text-faded);
            margin-bottom: 3px;
        }

        .detail-value {
            font-size: 1.1em;
            font-weight: 700;
            margin: 0;
        }

        .condition-note {
            font-style: italic;
            padding: 10px;
            border-left: 3px solid var(--gold);
            background: #252525;
        }

        /* --- COMPS LIST --- */
        .comp-list-container {
            background: #252525;
            padding: 15px;
            border-radius: 8px;
            max-height: 500px;
            overflow-y: auto;
        }

        #comps-list {
            list-style: none;
            padding: 0;
        }

        #comps-list li {
            padding: 8px 0;
            border-bottom: 1px dashed #333;
            font-size: 0.95em;
        }

        #comps-list li:last-child {
            border-bottom: none;
        }

        /* --- INPUT FORM --- */
        .input-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-light);
        }

        input[type="number"] {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: #252525;
            color: var(--text-light);
            font-size: 1.2em;
            box-sizing: border-box;
            transition: all 0.3s;
            font-weight: 500;
        }

        input[type="number"]:focus,
        input[type="password"]:focus {
            border-color: var(--gold);
            outline: none;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            transform: translateY(-2px);
        }

        .comp-justification-label {
            color: var(--text-faded);
            margin-bottom: 15px;
        }

        #comp-checkboxes {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        #comp-checkboxes label {
            font-weight: 500;
            color: var(--text-light);
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            padding: 12px 18px;
            border-radius: 8px;
            background: #252525;
            border: 2px solid var(--border-color);
            transition: all 0.3s;
            font-size: 1.1em;
        }

        #comp-checkboxes label:hover {
            background: rgba(255, 215, 0, 0.1);
            border-color: var(--gold);
            transform: translateY(-2px);
        }

        #comp-checkboxes input[type="checkbox"] {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: var(--gold);
        }

        /* --- REPAIR OPTIONS --- */
        #repair-options {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 10px;
        }

        #repair-options label {
            font-weight: 500;
            color: var(--text-light);
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            padding: 12px 18px;
            border-radius: 8px;
            background: #252525;
            border: 2px solid var(--border-color);
            transition: all 0.3s;
            font-size: 1.1em;
        }

        #repair-options label:hover {
            border-color: var(--gold);
            background: rgba(255, 215, 0, 0.1);
            transform: translateY(-2px);
        }

        #repair-options input[type="radio"] {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: var(--gold);
        }

        #repair-options label:has(input[type="radio"]:checked) {
            border-color: var(--gold);
            background: rgba(255, 215, 0, 0.2);
            font-weight: 700;
        }

        /* --- BUTTONS --- */
        .cta-button {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 6px;
            background: var(--primary-gradient);
            color: #000;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        .cta-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .secondary-button {
            margin-top: 20px;
            background: #1a1a1a;
            color: var(--gold);
            border: 2px solid var(--gold);
        }

        .secondary-button:hover {
            background: rgba(255, 215, 0, 0.1);
        }

        /* --- RESULTS SECTION --- */
        .hidden {
            display: none;
        }

        .results-card {
            text-align: center;
            border: 2px solid var(--gold);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
        }

        .result-metrics {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
            padding: 15px 0;
            border-top: 1px solid var(--gold);
            border-bottom: 1px solid var(--gold);
        }

        .metric-label {
            display: block;
            color: var(--text-faded);
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .metric-value {
            font-size: 1.8em;
            font-weight: 700;
            margin: 0;
        }

        .score-display {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2.2em;
        }

        #feedback {
            min-height: 50px;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1.1em;
        }

        .feedback-good {
            background-color: rgba(255, 215, 0, 0.1);
            color: var(--gold);
            border: 1px solid var(--gold);
        }

        .feedback-bad {
            background-color: #5b2e2e;
            color: var(--error-color);
            border: 1px solid var(--error-color);
        }

        /* --- CALCULATOR --- */
        .calculator {
            max-width: 100%;
            padding: 10px;
        }

        .calculator-display {
            margin-bottom: 20px;
        }

        .calculator-display input {
            width: 100%;
            padding: 25px;
            font-size: 2.5em;
            text-align: right;
            background: #252525;
            border: 3px solid var(--gold);
            border-radius: 12px;
            color: var(--gold);
            font-family: 'Courier New', monospace;
            box-sizing: border-box;
            font-weight: 700;
        }

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .calc-btn {
            padding: 25px;
            font-size: 1.8em;
            font-weight: 700;
            background: #2a2a2a;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.2s;
        }

        .calc-btn:hover {
            background: #333;
            border-color: var(--gold);
        }

        .calc-btn:active {
            transform: scale(0.95);
        }

        .calc-equals {
            background: var(--primary-gradient);
            color: #000;
            border: none;
        }

        .calc-equals:hover {
            opacity: 0.9;
        }

        /* --- STATS BAR --- */
        .stats-bar {
            background: var(--primary-gradient);
            color: #000;
            padding: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            align-items: center;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            display: block;
            font-size: 0.85em;
            opacity: 0.9;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: 700;
            margin: 0;
        }

        .timer-value {
            font-size: 2em;
            color: #000;
        }

        .timer-value.warning {
            color: var(--error-color);
            animation: pulse 0.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* --- TOGGLE SWITCH --- */
        .mode-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            transition: 0.3s;
            border-radius: 26px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        .toggle-switch input:checked + .toggle-slider {
            background-color: #000;
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* --- HINT BUTTON --- */
        .hint-button {
            margin-top: 10px;
            padding: 10px 20px;
            background: var(--primary-gradient);
            color: #000;
            border: none;
            border-radius: 6px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .hint-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
        }

        .hint-button:disabled {
            background: #666;
            color: #999;
            cursor: not-allowed;
            transform: none;
        }

        /* --- COMP FEEDBACK --- */
        .comp-correct {
            color: var(--gold) !important;
            font-weight: bold;
        }

        .comp-correct::after {
            content: " ‚úì";
            color: var(--gold);
            font-size: 1.2em;
        }

        .comp-incorrect {
            color: var(--error-color) !important;
        }

        .comp-incorrect::after {
            content: " ‚úó";
            color: var(--error-color);
            font-size: 1.2em;
        }

        .comp-missed {
            opacity: 0.6;
        }

        .comp-missed::after {
            content: " (missed)";
            color: #FFA500;
            font-size: 0.9em;
        }

        .comp-hint {
            background: rgba(255, 215, 0, 0.2);
            padding: 4px 8px;
            border-radius: 4px;
            border: 2px solid var(--gold);
        }

        /* --- ANIMATIONS --- */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .score-animate {
            animation: scoreReveal 1s ease-out;
        }

        @keyframes scoreReveal {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* --- CONFETTI --- */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #f0f;
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* --- HOW TO PLAY BUTTON --- */
        .how-to-play-button {
            padding: 10px 20px;
            background: var(--primary-gradient);
            color: #000;
            border: none;
            border-radius: 6px;
            font-weight: 700;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .how-to-play-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
        }

        /* --- MODAL --- */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.hidden {
            display: none;
        }

        .modal-content {
            background: var(--card-dark);
            border-radius: 10px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--gold);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            border-bottom: 2px solid var(--gold);
            background: rgba(255, 215, 0, 0.1);
        }

        .modal-header h2 {
            margin: 0;
            color: var(--text-light);
            font-size: 1.8em;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 2em;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: rgba(255, 215, 0, 0.2);
            color: var(--gold);
        }

        .modal-body {
            padding: 30px;
            color: var(--text-light);
        }

        .modal-body h3 {
            color: var(--gold);
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .modal-body h3:first-child {
            margin-top: 0;
        }

        .modal-body p {
            margin-bottom: 15px;
            line-height: 1.8;
        }

        .modal-body ol, .modal-body ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .modal-body li {
            margin-bottom: 10px;
            line-height: 1.8;
        }

        .modal-body code {
            background: #252525;
            padding: 2px 8px;
            border-radius: 4px;
            color: var(--gold);
            font-family: 'Courier New', monospace;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 1024px) {
            .two-column-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .how-to-play-button {
                font-size: 0.9em;
                padding: 8px 15px;
            }

            .modal-content {
                max-width: 95%;
            }

            .modal-body {
                padding: 20px;
            }

            .password-container {
                padding: 40px 30px;
            }
        }
    </style>
</head>
<body>
    <!-- Password Screen -->
    <div id="password-screen" class="password-screen">
        <div class="password-container">
            <div class="shark-icon">ü¶à</div>
            <h1>Apex Property Analyzer</h1>
            <p>Exclusive Access for Apex Academy Students</p>
            <input type="password" id="password-input" class="password-input" placeholder="Enter Access Code" onkeypress="if(event.key==='Enter') checkPassword()">
            <button onclick="checkPassword()" class="password-submit">Unlock Access</button>
            <p class="password-error" id="password-error">‚ùå Incorrect password. Try again.</p>
        </div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="main-app">
        <header>
            <div class="header-content">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                    <div>
                        <h1><span class="shark-badge">ü¶à</span>Apex Property Analyzer</h1>
                        <p>Master the art of real estate comps analysis and MAO calculations</p>
                    </div>
                    <button id="how-to-play-btn" class="how-to-play-button" onclick="openHowToPlayModal()">
                        üìñ How to Play
                    </button>
                </div>
            </div>
        </header>

        <!-- How to Play Modal -->
        <div id="how-to-play-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üìñ How to Play Apex Property Analyzer</h2>
                    <button class="modal-close" onclick="closeHowToPlayModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <h3>üéØ Objective</h3>
                    <p>Analyze real estate deals like a professional wholesaler. Estimate ARV, repair costs, and calculate the Maximum Allowable Offer (MAO) to score points.</p>

                    <h3>üìã Step-by-Step Guide</h3>
                    <ol>
                        <li><strong>Review Property Details:</strong> Check the address, beds, baths, square footage, and condition report.</li>
                        <li><strong>Select Repair Estimate:</strong> Choose the most accurate repair cost from the options provided based on the condition report.</li>
                        <li><strong>Analyze Comparable Sales (Comps):</strong> Review the 6 comparable properties. Look for recent sales with similar features and condition. Ignore outliers (old sales, foreclosures, different sizes).</li>
                        <li><strong>Select Best Comps:</strong> Check the boxes next to the 3 most reliable comps. Focus on date, condition, and similarity to the subject property.</li>
                        <li><strong>Estimate ARV:</strong> Calculate the After Repair Value by averaging your selected comps. Use the built-in calculator if needed.</li>
                        <li><strong>Calculate MAO:</strong> Use the formula: <code>(ARV √ó 90%) - (Repairs √ó 2) - $10,000</code></li>
                        <li><strong>Submit & Score:</strong> Submit your analysis to see how you did! You'll receive detailed feedback on each component.</li>
                    </ol>

                    <h3>‚ö° Game Features</h3>
                    <ul>
                        <li><strong>üí° Hints:</strong> Click the hint button to highlight one good comp (-10 points penalty)</li>
                        <li><strong>‚è±Ô∏è Timed Mode:</strong> Toggle for a 120-second challenge mode</li>
                        <li><strong>üìä Progress Tracking:</strong> Your average and best scores are saved automatically</li>
                        <li><strong>üé≤ Random Deals:</strong> Jump to any random property to practice</li>
                    </ul>

                    <h3>üèÜ Scoring</h3>
                    <ul>
                        <li><strong>Comp Selection (20%):</strong> -20 points per wrong comp, -15 per missed good comp</li>
                        <li><strong>Repair Estimate (20%):</strong> Must select the correct repair value</li>
                        <li><strong>ARV Estimate (30%):</strong> Score based on % deviation from true ARV</li>
                        <li><strong>MAO Calculation (30%):</strong> Score based on % deviation from true MAO</li>
                        <li><strong>90+:</strong> Apex Predator! ü¶à</li>
                        <li><strong>70-89:</strong> Solid deal analysis ‚úì</li>
                        <li><strong>&lt;70:</strong> Keep practicing! üìö</li>
                    </ul>

                    <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #333;">
                        <p style="color: var(--text-faded);">Good luck, and happy deal hunting! ü¶à</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <!-- Stats & Controls Bar - Full Width -->
            <div class="card stats-bar">
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Progress</span>
                        <p class="stat-value"><span id="property-id">--</span> / 50</p>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Avg Score</span>
                        <p class="stat-value" id="avg-score">--</p>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Best Score</span>
                        <p class="stat-value" id="best-score">--</p>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Mode</span>
                        <div class="mode-toggle">
                            <label class="toggle-switch">
                                <input type="checkbox" id="timed-mode-toggle">
                                <span class="toggle-slider"></span>
                            </label>
                            <span style="font-size: 0.9em; margin-left: 8px;">Timed (120s)</span>
                        </div>
                    </div>
                    <div class="stat-item timer-container hidden" id="timer-display">
                        <span class="stat-label">Time</span>
                        <p class="stat-value timer-value" id="timer-value">120</p>
                    </div>
                </div>
            </div>

            <!-- Property Details - Full Width -->
            <div class="card">
                <h2 class="section-title">Property Details</h2>
                <div class="property-details-grid">
                    <div>
                        <span class="detail-label">Address</span>
                        <p class="detail-value" id="property-address">--</p>
                    </div>
                    <div>
                        <span class="detail-label">Beds</span>
                        <p class="detail-value" id="property-beds">--</p>
                    </div>
                    <div>
                        <span class="detail-label">Baths</span>
                        <p class="detail-value" id="property-baths">--</p>
                    </div>
                </div>
                <div class="property-details-grid">
                    <div>
                        <span class="detail-label">Square Feet</span>
                        <p class="detail-value" id="property-sqft">--</p>
                    </div>
                </div>
                <h3 class="section-subtitle">Condition Report</h3>
                <div class="condition-note">
                    <p id="property-condition">--</p>
                </div>
                <div id="repair-options-section">
                    <h3 class="section-subtitle" style="margin-top: 20px;">Estimated Repairs</h3>
                    <div id="repair-options">
                        <!-- Repair options will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Two Column Grid: Comps & Calculator -->
            <div class="two-column-grid">
                <div class="card">
                    <h2 class="section-title">Comparable Sales (Comps)</h2>
                    <div class="comp-list-container">
                        <ul id="comps-list">
                        </ul>
                    </div>
                    <p style="font-size: 0.9em; margin-top: 10px; color: #b0b0b0;">* Analyze the comps to estimate the ARV. Recent sales with similar features are most reliable.</p>
                </div>

                <div class="card">
                    <h2 class="section-title">Calculator</h2>
                    <div class="calculator">
                        <div class="calculator-display">
                            <input type="text" id="calc-display" readonly value="0">
                        </div>
                        <div class="calculator-buttons">
                            <button type="button" class="calc-btn" onclick="clearCalc()">C</button>
                            <button type="button" class="calc-btn" onclick="appendCalc('/')">/</button>
                            <button type="button" class="calc-btn" onclick="appendCalc('*')">√ó</button>
                            <button type="button" class="calc-btn" onclick="backspaceCalc()">‚Üê</button>

                            <button type="button" class="calc-btn" onclick="appendCalc('7')">7</button>
                            <button type="button" class="calc-btn" onclick="appendCalc('8')">8</button>
                            <button type="button" class="calc-btn" onclick="appendCalc('9')">9</button>
                            <button type="button" class="calc-btn" onclick="appendCalc('-')">-</button>

                            <button type="button" class="calc-btn" onclick="appendCalc('4')">4</button>
                            <button type="button" class="calc-btn" onclick="appendCalc('5')">5</button>
                            <button type="button" class="calc-btn" onclick="appendCalc('6')">6</button>
                            <button type="button" class="calc-btn" onclick="appendCalc('+')">+</button>

                            <button type="button" class="calc-btn" onclick="appendCalc('1')">1</button>
                            <button type="button" class="calc-btn" onclick="appendCalc('2')">2</button>
                            <button type="button" class="calc-btn" onclick="appendCalc('3')">3</button>
                            <button type="button" class="calc-btn calc-equals" onclick="calculateCalc()" style="grid-row: span 2;">=</button>

                            <button type="button" class="calc-btn" onclick="appendCalc('0')" style="grid-column: span 2;">0</button>
                            <button type="button" class="calc-btn" onclick="appendCalc('.')">.</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Your Analysis - Full Width -->
            <div class="card">
                <h2 class="section-title">Your Analysis</h2>
                <form id="arv-form">
                    <p style="font-style: italic; color: #b0b0b0;">Use the comps and condition report to make your best estimate.</p>

                    <div class="input-group">
                        <label class="comp-justification-label">1. Which comps did you use for your analysis?</label>
                        <div id="comp-checkboxes">
                            <!-- Dynamically populated with checkboxes -->
                        </div>
                        <button type="button" id="hint-btn" class="hint-button" onclick="useHint()">
                            üí° Use Hint (-10 points)
                        </button>
                    </div>

                    <div class="input-group">
                        <label for="input-arv">2. Estimated After Repair Value (ARV)</label>
                        <input type="number" id="input-arv" placeholder="Enter ARV (e.g., 300000)" required>
                    </div>

                    <div class="input-group">
                        <label for="input-repairs">3. Estimated Repairs Cost</label>
                        <input type="number" id="input-repairs" placeholder="Enter Repair Cost (e.g., 50000)">
                    </div>

                    <div class="input-group">
                        <label for="input-mao">4. Your Calculated MAO (Maximum Allowable Offer)</label>
                        <input type="number" id="input-mao" placeholder="Enter your MAO (e.g., 200000)" required>
                        <span style="font-size: 0.85em; color: #b0b0b0; margin-top: 5px; display: block;">
                            Use the calculator above. Formula: (ARV √ó 90%) - (Repairs √ó 2) - $10,000
                        </span>
                    </div>

                    <button type="submit" id="submit-btn" class="cta-button">Submit Analysis & Get Score</button>
                </form>
            </div>

            <!-- Results - Full Width -->
            <div id="results" class="card results-card hidden">
                <h2 class="section-title">Results & Feedback</h2>

                <div class="result-metrics">
                    <div>
                        <span class="metric-label">Your Calculated MAO</span>
                        <p class="metric-value" id="player-mao">--</p>
                        <span style="font-size: 0.8em; color: #b0b0b0;">(ARV √ó 90% - Repairs √ó 2 - $10k Fee)</span>
                    </div>
                    <div>
                        <span class="metric-label">Your Score</span>
                        <p class="metric-value score-display" id="final-score">-- / 100</p>
                    </div>
                </div>

                <div id="feedback"></div>

                <div>
                    <h3 class="section-subtitle">The Truth (Actual Deal Metrics)</h3>
                    <p><strong>True ARV:</strong> <span id="true-arv">--</span></p>
                    <p><strong>True Repairs:</strong> <span id="true-repairs">--</span></p>
                    <p style="color: #FFD700;"><strong>True MAO:</strong> <span id="true-mao">--</span></p>
                </div>
            </div>

            <!-- Action Buttons -->
            <div style="text-align: center; margin-top: 20px; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <button type="button" onclick="loadNewProperty()" id="next-challenge-btn" class="cta-button secondary-button" disabled>
                    Next Challenge ‚û°Ô∏è
                </button>
                <button type="button" onclick="loadRandomProperty()" id="random-deal-btn" class="cta-button secondary-button">
                    üé≤ Random Deal
                </button>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 Apex Academy | Apex Property Analyzer ü¶à</p>
        </footer>
    </div>

    <script>
    // Password Protection
    function checkPassword() {
        const input = document.getElementById('password-input');
        const errorMsg = document.getElementById('password-error');
        const passwordScreen = document.getElementById('password-screen');
        const mainApp = document.getElementById('main-app');
        
        if (input.value === 'ApexAnalyzer2025') {
            passwordScreen.classList.add('hidden');
            mainApp.classList.add('unlocked');
            // Initialize the game after password is correct
            if (typeof properties !== 'undefined' && properties.length > 0) {
                loadProperty(properties[currentPropertyIndex]);
            }
        } else {
            errorMsg.classList.add('show');
            input.value = '';
            setTimeout(() => {
                errorMsg.classList.remove('show');
            }, 3000);
        }
    }

   // Password Protection
function checkPassword() {
    const input = document.getElementById('password-input');
    const errorMsg = document.getElementById('password-error');
    const passwordScreen = document.getElementById('password-screen');
    const mainApp = document.getElementById('main-app');
    
    if (input.value === 'ApexAnalyzer2025') {
        passwordScreen.classList.add('hidden');
        mainApp.classList.add('unlocked');
        // Initialize the game after password is correct
        if (typeof properties !== 'undefined' && properties.length > 0) {
            loadProperty(properties[currentPropertyIndex]);
        }
    } else {
        errorMsg.classList.add('show');
        input.value = '';
        setTimeout(() => {
            errorMsg.classList.remove('show');
        }, 3000);
    }
}

// Global State Variables
const properties = [
    // 1. Light Cosmetic Fix (Mid ARV, Low Rehab)
    {
        id: 1,
        address: "123 Main Street",
        beds: 3, baths: 2, sqFt: 1500,
        condition: "Good structure. Needs paint, new carpet, and updated fixtures.",
        trueARV: Math.round((310000 + 280000 + 305000) / 3), // $298,333 (average of good comps)
        trueRepairs: 30000,
        repairOptions: [
            { value: 20000, isCorrect: false },
            { value: 30000, isCorrect: true },
            { value: 40000, isCorrect: false },
            { value: 50000, isCorrect: false }
        ],
        // MAO = (ARV * 0.90) - (Repairs * 2) - $10,000 fee
        trueMAO: Math.round((0.90 * Math.round((310000 + 280000 + 305000) / 3)) - (2 * 30000) - 10000), // $198,500
        comps: [
            { id: 'A', price: 310000, date: '1 month ago', condition: 'Perfect match, recently flipped.', isGood: true },
            { id: 'B', price: 350000, date: '2 weeks ago', condition: 'Larger lot (ignore).', isGood: false },
            { id: 'C', price: 280000, date: '3 months ago', condition: 'Dated interior, lowest ARV comp.', isGood: true },
            { id: 'D', price: 305000, date: '1 week ago', condition: 'Solid ARV indicator.', isGood: true },
            { id: 'E', price: 200000, date: '1 year ago', condition: 'Sale too old.', isGood: false },
            { id: 'F', price: 250000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false }
        ]
    },
    // 2. Full Kitchen/Bath Remodel (Mid ARV, Mid Rehab)
    {
        id: 2,
        address: "45 Oak Lane",
        beds: 4, baths: 2, sqFt: 2100,
        condition: "Needs full kitchen and two bathroom remodels. New roof required (approx $15k).",
        trueARV: Math.round((445000 + 460000 + 430000) / 3), // $445,000 (average of good comps)
        trueRepairs: 60000, 
        repairOptions: [
            { value: 35000, isCorrect: false },
            { value: 60000, isCorrect: true },
            { value: 85000, isCorrect: false },
            { value: 110000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((445000 + 460000 + 430000) / 3)) - (2 * 60000) - 10000), // $270,500
        comps: [
            { id: 'A', price: 445000, date: '2 weeks ago', condition: 'Similar size, perfect comp.', isGood: true },
            { id: 'B', price: 500000, date: '1 month ago', condition: 'Includes pool (subject does not).', isGood: false },
            { id: 'C', price: 460000, date: '1 week ago', condition: 'Highest ARV comp, good ceiling.', isGood: true },
            { id: 'D', price: 430000, date: '3 months ago', condition: 'Reliable ARV comp.', isGood: true },
            { id: 'E', price: 300000, date: '1 year ago', condition: 'Sale too old.', isGood: false },
            { id: 'F', price: 350000, date: '6 months ago', condition: 'Sold As-Is.', isGood: false }
        ]
    },
    // 3. Heavy Structural/Gut (Low ARV, Very High Rehab)
    {
        id: 3,
        address: "99 Disaster Close",
        beds: 2, baths: 1, sqFt: 900,
        condition: "Total gut. Foundation, electrical, plumbing, and roof all need replacement. Very costly.",
        trueARV: Math.round((160000 + 145000 + 120000) / 3), // $141,666 (average of good comps)
        trueRepairs: 75000,
        repairOptions: [
            { value: 45000, isCorrect: false },
            { value: 75000, isCorrect: true },
            { value: 105000, isCorrect: false },
            { value: 135000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((160000 + 145000 + 120000) / 3)) - (2 * 75000) - 10000), // $-32,500
        comps: [
            { id: 'A', price: 160000, date: '1 week ago', condition: 'Highest comp for renovated small home.', isGood: true },
            { id: 'B', price: 145000, date: '2 months ago', condition: 'Reliable ARV comp.', isGood: true },
            { id: 'C', price: 120000, date: '3 months ago', condition: 'Dated interior, lowest ARV comp.', isGood: true },
            { id: 'D', price: 200000, date: '6 months ago', condition: 'Large 3 bed home (ignore).', isGood: false },
            { id: 'E', price: 80000, date: '1 year ago', condition: 'Sale too old.', isGood: false },
            { id: 'F', price: 50000, date: '1 month ago', condition: 'Vacant land sale.', isGood: false } 
        ]
    },
    // 4. Premium Area, Light Cosmetic (High ARV, Low Rehab)
    {
        id: 4,
        address: "10 Luxury Heights",
        beds: 5, baths: 4, sqFt: 3500,
        condition: "Excellent condition. Needs minor high-end paint, trim, and landscaping to maximize profit.",
        trueARV: Math.round((840000 + 860000 + 830000) / 3), // $843,333 (average of good comps)
        trueRepairs: 40000,
        repairOptions: [
            { value: 25000, isCorrect: false },
            { value: 40000, isCorrect: true },
            { value: 55000, isCorrect: false },
            { value: 70000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((840000 + 860000 + 830000) / 3)) - (2 * 40000) - 10000), // $668,999
        comps: [
            { id: 'A', price: 840000, date: '1 month ago', condition: 'Similar size, perfect comp.', isGood: true },
            { id: 'B', price: 950000, date: '2 weeks ago', condition: 'New construction (ignore).', isGood: false },
            { id: 'C', price: 860000, date: '1 week ago', condition: 'Highest ARV comp, good ceiling.', isGood: true },
            { id: 'D', price: 830000, date: '3 months ago', condition: 'Good ARV indicator.', isGood: true },
            { id: 'E', price: 650000, date: '6 months ago', condition: 'Sold by motivated seller.', isGood: false },
            { id: 'F', price: 700000, date: '1 year ago', condition: 'Sale too old.', isGood: false } 
        ]
    },
    // 5. Fire Damage, Mid-Range (Mid ARV, High Rehab)
    {
        id: 5,
        address: "20 Smoke Trail",
        beds: 3, baths: 1, sqFt: 1200,
        condition: "Kitchen fire damage and smoke damage throughout. Requires full mitigation and new HVAC.",
        trueARV: Math.round((260000 + 240000 + 255000) / 3), // $251,666 (average of good comps)
        trueRepairs: 70000,
        repairOptions: [
            { value: 40000, isCorrect: false },
            { value: 70000, isCorrect: true },
            { value: 100000, isCorrect: false },
            { value: 125000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((260000 + 240000 + 255000) / 3)) - (2 * 70000) - 10000), // $76,499
        comps: [
            { id: 'A', price: 260000, date: '1 week ago', condition: 'Highest comp for renovated small home.', isGood: true },
            { id: 'B', price: 240000, date: '2 months ago', condition: 'Reliable ARV comp.', isGood: true },
            { id: 'C', price: 300000, date: '1 month ago', condition: 'Two-story home (ignore).', isGood: false },
            { id: 'D', price: 255000, date: '3 weeks ago', condition: 'Solid ARV indicator.', isGood: true },
            { id: 'E', price: 150000, date: '6 months ago', condition: 'Sold As-Is with damage.', isGood: false },
            { id: 'F', price: 180000, date: '1 year ago', condition: 'Sale too old.', isGood: false } 
        ]
    },
    // 6. Quick Turn Rental (Low ARV, Very Low Rehab)
    {
        id: 6,
        address: "7 Renters Delight",
        beds: 2, baths: 1, sqFt: 800,
        condition: "Rent-ready, but needs new paint and deep clean to maximize rent/value.",
        trueARV: Math.round((185000 + 190000 + 160000) / 3), // $178,333 (average of good comps)
        trueRepairs: 15000,
        repairOptions: [
            { value: 9000, isCorrect: false },
            { value: 15000, isCorrect: true },
            { value: 20000, isCorrect: false },
            { value: 25000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((185000 + 190000 + 160000) / 3)) - (2 * 15000) - 10000), // $120,499
        comps: [
            { id: 'A', price: 185000, date: '2 weeks ago', condition: 'Identical unit, strong ARV.', isGood: true },
            { id: 'B', price: 190000, date: '1 month ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 160000, date: '3 months ago', condition: 'Dated interior, lowest ARV comp.', isGood: true },
            { id: 'D', price: 220000, date: '6 months ago', condition: 'Sold with a detached garage (ignore).', isGood: false },
            { id: 'E', price: 100000, date: '1 year ago', condition: 'Sale too old.', isGood: false },
            { id: 'F', price: 150000, date: '4 months ago', condition: 'Sold As-Is.', isGood: false } 
        ]
    },
    // 7. Hoarder House Cleanout (Mid ARV, Mid-High Rehab)
    {
        id: 7,
        address: "33 Clutter Court",
        beds: 3, baths: 2, sqFt: 1600,
        condition: "Major cleanout needed. Interior is trashed. Requires new floors, kitchen, and minor drywall repair.",
        trueARV: Math.round((340000 + 360000 + 355000) / 3), // $351,666 (average of good comps)
        trueRepairs: 65000,
        repairOptions: [
            { value: 40000, isCorrect: false },
            { value: 65000, isCorrect: true },
            { value: 90000, isCorrect: false },
            { value: 115000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((340000 + 360000 + 355000) / 3)) - (2 * 65000) - 10000), // $176,499
        comps: [
            { id: 'A', price: 340000, date: '1 week ago', condition: 'Reliable ARV comp.', isGood: true },
            { id: 'B', price: 360000, date: '2 months ago', condition: 'Highest ARV comp, good ceiling.', isGood: true },
            { id: 'C', price: 400000, date: '1 month ago', condition: '4 bed, much larger (ignore).', isGood: false },
            { id: 'D', price: 355000, date: '3 weeks ago', condition: 'Solid ARV indicator.', isGood: true },
            { id: 'E', price: 250000, date: '6 months ago', condition: 'Sold by motivated seller.', isGood: false },
            { id: 'F', price: 200000, date: '1 year ago', condition: 'Sale too old.', isGood: false } 
        ]
    },
    // 8. Bad Area, Minimal Profit (Low ARV, Mid Rehab)
    {
        id: 8,
        address: "8 Tough Neighborhood",
        beds: 3, baths: 1, sqFt: 1100,
        condition: "Need new roof, HVAC, and full cosmetic overhaul. Area dictates low ARV cap.",
        trueARV: Math.round((165000 + 175000 + 155000) / 3), // $165,000 (average of good comps)
        trueRepairs: 50000,
        repairOptions: [
            { value: 30000, isCorrect: false },
            { value: 50000, isCorrect: true },
            { value: 70000, isCorrect: false },
            { value: 90000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((165000 + 175000 + 155000) / 3)) - (2 * 50000) - 10000), // $38,500
        comps: [
            { id: 'A', price: 165000, date: '2 weeks ago', condition: 'Reliable ARV comp.', isGood: true },
            { id: 'B', price: 175000, date: '1 month ago', condition: 'Highest ARV comp, good ceiling.', isGood: true },
            { id: 'C', price: 200000, date: '3 months ago', condition: 'Just outside the area (ignore).', isGood: false },
            { id: 'D', price: 155000, date: '1 week ago', condition: 'Lowest ARV comp.', isGood: true },
            { id: 'E', price: 100000, date: '1 year ago', condition: 'Sale too old.', isGood: false },
            { id: 'F', price: 80000, date: '6 months ago', condition: 'Sold As-Is.', isGood: false } 
        ]
    },
    // 9. Good Structure, Full Cosmetic (Mid ARV, Mid Rehab)
    {
        id: 9,
        address: "11 All Systems Go",
        beds: 4, baths: 3, sqFt: 2000,
        condition: "All systems (HVAC, roof) are modern. Needs new kitchen, baths, and flooring throughout.",
        trueARV: Math.round((410000 + 390000 + 350000) / 3), // $383,333 (average of good comps)
        trueRepairs: 55000,
        repairOptions: [
            { value: 35000, isCorrect: false },
            { value: 55000, isCorrect: true },
            { value: 75000, isCorrect: false },
            { value: 100000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((410000 + 390000 + 350000) / 3)) - (2 * 55000) - 10000), // $224,999
        comps: [
            { id: 'A', price: 410000, date: '1 month ago', condition: 'Highest ARV comp, good ceiling.', isGood: true },
            { id: 'B', price: 390000, date: '2 weeks ago', condition: 'Reliable ARV comp.', isGood: true },
            { id: 'C', price: 350000, date: '3 months ago', condition: 'Dated interior, lowest ARV comp.', isGood: true },
            { id: 'D', price: 450000, date: '1 week ago', condition: 'New construction (ignore).', isGood: false },
            { id: 'E', price: 250000, date: '1 year ago', condition: 'Sale too old.', isGood: false },
            { id: 'F', price: 300000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 10. Large Rehab, Potential Addition (High ARV, Mid-High Rehab)
    {
        id: 10,
        address: "55 Copper Peak Dr",
        beds: 4, baths: 2, sqFt: 2500,
        condition: "Large home, requires new roof, windows, and full cosmetic. Potential for 3rd bath addition ($15k cost).",
        trueARV: Math.round((540000 + 580000 + 555000) / 3), // $558,333 (average of good comps)
        trueRepairs: 80000,
        repairOptions: [
            { value: 50000, isCorrect: false },
            { value: 80000, isCorrect: true },
            { value: 110000, isCorrect: false },
            { value: 145000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((540000 + 580000 + 555000) / 3)) - (2 * 80000) - 10000), // $332,499
        comps: [
            { id: 'A', price: 540000, date: '2 weeks ago', condition: 'Reliable ARV comp.', isGood: true },
            { id: 'B', price: 580000, date: '1 month ago', condition: 'Includes 3rd bath addition (good ARV indicator).', isGood: true },
            { id: 'C', price: 650000, date: '3 months ago', condition: 'New construction (ignore).', isGood: false },
            { id: 'D', price: 555000, date: '1 week ago', condition: 'Highest ARV comp, good ceiling.', isGood: true },
            { id: 'E', price: 400000, date: '6 months ago', condition: 'Sold As-Is.', isGood: false },
            { id: 'F', price: 450000, date: '1 year ago', condition: 'Sale too old.', isGood: false } 
        ]
    },
    // 11. Basement Leak Fix (Mid ARV, Low-Mid Rehab)
    {
        id: 11,
        address: "65 Riverbend Circle",
        beds: 3, baths: 2, sqFt: 1800,
        condition: "Modern open concept, but basement requires $15k in waterproofing. Light cosmetic upstairs.",
        trueARV: Math.round((410000 + 425000 + 415000) / 3), // $416,666 (average of good comps)
        trueRepairs: 40000,
        repairOptions: [
            { value: 25000, isCorrect: false },
            { value: 40000, isCorrect: true },
            { value: 55000, isCorrect: false },
            { value: 70000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((410000 + 425000 + 415000) / 3)) - (2 * 40000) - 10000), // $284,999
        comps: [
            { id: 'A', price: 410000, date: '2 weeks ago', condition: 'Perfect match, same neighborhood.', isGood: true },
            { id: 'B', price: 445000, date: '1 month ago', condition: 'Fully finished basement (subject is unfinished).', isGood: false },
            { id: 'C', price: 425000, date: '1 week ago', condition: 'Recent sale, excellent ARV indicator.', isGood: true },
            { id: 'D', price: 300000, date: '1 year ago', condition: 'Sale too old.', isGood: false },
            { id: 'E', price: 415000, date: '3 months ago', condition: 'Good comp, slight adjustment for age.', isGood: true },
            { id: 'F', price: 350000, date: '2 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 12. Small Lot, Premium Area (High ARV, Low Rehab)
    {
        id: 12,
        address: "22 Cypress Way",
        beds: 4, baths: 3, sqFt: 2200,
        condition: "Top school district. Needs quick cosmetic refresh to meet buyer expectations. Systems are sound.",
        trueARV: Math.round((745000 + 700000 + 760000) / 3), // $735,000 (average of good comps)
        trueRepairs: 30000,
        repairOptions: [
            { value: 18000, isCorrect: false },
            { value: 30000, isCorrect: true },
            { value: 40000, isCorrect: false },
            { value: 55000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((745000 + 700000 + 760000) / 3)) - (2 * 30000) - 10000), // $591,500
        comps: [
            { id: 'A', price: 745000, date: '1 month ago', condition: 'Similar size, perfect comp.', isGood: true },
            { id: 'B', price: 700000, date: '3 months ago', condition: 'Dated interior, lowest ARV comp.', isGood: true },
            { id: 'C', price: 850000, date: '2 months ago', condition: 'New construction (ignore).', isGood: false },
            { id: 'D', price: 760000, date: '2 weeks ago', condition: 'High-end finishes, good ARV ceiling.', isGood: true },
            { id: 'E', price: 650000, date: '1 year ago', condition: 'Sale too old.', isGood: false },
            { id: 'F', price: 500000, date: '6 months ago', condition: 'Small 3 bed unit, ignore.', isGood: false } 
        ]
    },
    // 13. Deferred Maintenance Special (Mid-Low ARV, Mid Rehab)
    {
        id: 13,
        address: "18 Pine Needle Rd",
        beds: 3, baths: 1, sqFt: 1300,
        condition: "Needs roof, HVAC, and kitchen updates. General deferred maintenance for 10+ years.",
        trueARV: Math.round((255000 + 280000 + 265000) / 3), // $266,666 (average of good comps)
        trueRepairs: 60000,
        repairOptions: [
            { value: 35000, isCorrect: false },
            { value: 60000, isCorrect: true },
            { value: 85000, isCorrect: false },
            { value: 110000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((255000 + 280000 + 265000) / 3)) - (2 * 60000) - 10000), // $109,999
        comps: [
            { id: 'A', price: 255000, date: '3 weeks ago', condition: 'Comparable rehab, reliable.', isGood: true },
            { id: 'B', price: 280000, date: '1 month ago', condition: 'Larger lot and better view (adjust down).', isGood: true },
            { id: 'C', price: 220000, date: '2 months ago', condition: 'Sold by motivated seller, low price.', isGood: false },
            { id: 'D', price: 350000, date: '1 year ago', condition: 'Completely different area.', isGood: false },
            { id: 'E', price: 265000, date: '1 week ago', condition: 'Excellent recent comp.', isGood: true },
            { id: 'F', price: 150000, date: '6 months ago', condition: 'Burned down property.', isGood: false } 
        ]
    },
    // 14. Multifamily Conversion Potential (High ARV, High Rehab)
    {
        id: 14,
        address: "41 Industrial Way",
        beds: 4, baths: 2, sqFt: 2500,
        condition: "Large single-family house zoned for duplex conversion. Needs full gut, new electrical/plumbing for two units.",
        trueARV: Math.round((620000 + 590000 + 610000) / 3), // $606,666 (average of good comps)
        trueRepairs: 120000,
        repairOptions: [
            { value: 70000, isCorrect: false },
            { value: 120000, isCorrect: true },
            { value: 170000, isCorrect: false },
            { value: 215000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((620000 + 590000 + 610000) / 3)) - (2 * 120000) - 10000), // $295,999
        comps: [
            { id: 'A', price: 620000, date: '1 month ago', condition: 'Recently converted duplex.', isGood: true },
            { id: 'B', price: 550000, date: '3 months ago', condition: 'Standard single-family remodel (not true ARV).', isGood: false },
            { id: 'C', price: 590000, date: '2 weeks ago', condition: 'Converted property, good ceiling price.', isGood: true },
            { id: 'D', price: 700000, date: '6 weeks ago', condition: 'New commercial development (ignore).', isGood: false },
            { id: 'E', price: 610000, date: '2 months ago', condition: 'Solid duplex comp.', isGood: true },
            { id: 'F', price: 400000, date: '1 year ago', condition: 'Sold as vacant land.', isGood: false } 
        ]
    },
    // 15. Flooded Basement/Mold (Mid-Low ARV, Very High Rehab)
    {
        id: 15,
        address: "707 Puddle Place",
        beds: 3, baths: 1, sqFt: 1000,
        condition: "Unfinished basement flooded. Significant mold and HVAC replacement required.",
        trueARV: Math.round((195000 + 205000 + 210000) / 3), // $203,333 (average of good comps)
        trueRepairs: 80000,
        repairOptions: [
            { value: 50000, isCorrect: false },
            { value: 80000, isCorrect: true },
            { value: 110000, isCorrect: false },
            { value: 145000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((195000 + 205000 + 210000) / 3)) - (2 * 80000) - 10000), // $12,999
        comps: [
            { id: 'A', price: 195000, date: '1 week ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 250000, date: '3 months ago', condition: 'Recently added second bath (subject only has one).', isGood: false },
            { id: 'C', price: 205000, date: '2 months ago', condition: 'Best reliable comp.', isGood: true },
            { id: 'D', price: 150000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'E', price: 210000, date: '1 month ago', condition: 'High end of comp range.', isGood: true },
            { id: 'F', price: 100000, date: '6 months ago', condition: 'Foreclosure, ignore.', isGood: false } 
        ]
    },
    // 16. Average Suburban Flip (Mid ARV, Mid Rehab)
    {
        id: 16,
        address: "800 Generic Ave",
        beds: 4, baths: 3, sqFt: 2100,
        condition: "Needs full cosmetic updates throughout. Roof is 15 years old and needs replacement.",
        trueARV: Math.round((440000 + 460000 + 450000) / 3), // $450,000 (average of good comps)
        trueRepairs: 65000,
        repairOptions: [
            { value: 40000, isCorrect: false },
            { value: 65000, isCorrect: true },
            { value: 90000, isCorrect: false },
            { value: 115000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((440000 + 460000 + 450000) / 3)) - (2 * 65000) - 10000), // $265,000
        comps: [
            { id: 'A', price: 440000, date: '1 month ago', condition: 'Standard flip, useable.', isGood: true },
            { id: 'B', price: 480000, date: '2 weeks ago', condition: 'Oversized lot, adjust down.', isGood: false },
            { id: 'C', price: 460000, date: '1 week ago', condition: 'Excellent ARV comp.', isGood: true },
            { id: 'D', price: 350000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'E', price: 450000, date: '3 months ago', condition: 'Perfect match to subject ARV.', isGood: true },
            { id: 'F', price: 550000, date: '2 months ago', condition: 'Brand new construction (ignore).', isGood: false } 
        ]
    },
    // 17. High-End Condos (High ARV, Low Rehab)
    {
        id: 17,
        address: "15 Sky Tower, Unit 12B",
        beds: 2, baths: 2, sqFt: 1100,
        condition: "High-rise unit. Needs minor kitchen refresh and new flooring. Excellent views are a factor.",
        trueARV: Math.round((645000 + 660000 + 650000) / 3), // $651,666 (average of good comps)
        trueRepairs: 20000,
        repairOptions: [
            { value: 12000, isCorrect: false },
            { value: 20000, isCorrect: true },
            { value: 30000, isCorrect: false },
            { value: 35000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((645000 + 660000 + 650000) / 3)) - (2 * 20000) - 10000), // $536,499
        comps: [
            { id: 'A', price: 645000, date: '1 week ago', condition: 'Identical unit, strong ARV.', isGood: true },
            { id: 'B', price: 700000, date: '1 month ago', condition: 'Penthouse view (adjust down).', isGood: false },
            { id: 'C', price: 660000, date: '2 weeks ago', condition: 'Best recent comp.', isGood: true },
            { id: 'D', price: 550000, date: '6 months ago', condition: 'Facing alley (ignore).', isGood: false },
            { id: 'E', price: 650000, date: '3 months ago', condition: 'Reliable sale, similar floor.', isGood: true },
            { id: 'F', price: 400000, date: '1 year ago', condition: 'Too old.', isGood: false } 
        ]
    },
    // 18. Fire Damage Repair (Mid ARV, Very High Rehab)
    {
        id: 18,
        address: "102 Ashes Drive",
        beds: 3, baths: 2, sqFt: 1600,
        condition: "Minor fire damage in the kitchen, smoke damage throughout. Requires full system checks and mitigation.",
        trueARV: Math.round((305000 + 310000 + 285000) / 3), // $300,000 (average of good comps)
        trueRepairs: 90000,
        repairOptions: [
            { value: 55000, isCorrect: false },
            { value: 90000, isCorrect: true },
            { value: 125000, isCorrect: false },
            { value: 160000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((305000 + 310000 + 285000) / 3)) - (2 * 90000) - 10000), // $80,000
        comps: [
            { id: 'A', price: 305000, date: '1 month ago', condition: 'Similar size, perfect comp.', isGood: true },
            { id: 'B', price: 250000, date: '2 months ago', condition: 'Sold as-is, not renovated.', isGood: false },
            { id: 'C', price: 310000, date: '2 weeks ago', condition: 'High-end ARV comp.', isGood: true },
            { id: 'D', price: 285000, date: '3 months ago', condition: 'Solid ARV comp.', isGood: true },
            { id: 'E', price: 400000, date: '1 year ago', condition: '4 bed, much larger.', isGood: false },
            { id: 'F', price: 200000, date: '6 months ago', condition: 'Vacant lot sale.', isGood: false } 
        ]
    },
    // 19. Historical District Fix (Low ARV, Mid Rehab)
    {
        id: 19,
        address: "7 Old Colonial St",
        beds: 3, baths: 1, sqFt: 1250,
        condition: "Historical property. Interior needs full renovation, but exterior brick/windows must be preserved (costly).",
        trueARV: Math.round((215000 + 225000 + 220000) / 3), // $220,000 (average of good comps)
        trueRepairs: 55000,
        repairOptions: [
            { value: 35000, isCorrect: false },
            { value: 55000, isCorrect: true },
            { value: 75000, isCorrect: false },
            { value: 100000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((215000 + 225000 + 220000) / 3)) - (2 * 55000) - 10000), // $78,000
        comps: [
            { id: 'A', price: 215000, date: '1 week ago', condition: 'Historic district remodel, reliable.', isGood: true },
            { id: 'B', price: 250000, date: '1 month ago', condition: 'Recently added second floor (subject is single-story).', isGood: false },
            { id: 'C', price: 225000, date: '2 weeks ago', condition: 'Best recent comp.', isGood: true },
            { id: 'D', price: 150000, date: '1 year ago', condition: 'Sale too old.', isGood: false },
            { id: 'E', price: 220000, date: '3 months ago', condition: 'Excellent ARV match.', isGood: true },
            { id: 'F', price: 100000, date: '6 months ago', condition: 'Commercial property.', isGood: false } 
        ]
    },
    // 20. New Roof and Systems (Mid ARV, Mid-High Rehab)
    {
        id: 20,
        address: "10 Cedar Lane",
        beds: 4, baths: 2, sqFt: 1750,
        condition: "Cosmetic wear, but roof, furnace, and AC are all original and must be replaced.",
        trueARV: Math.round((380000 + 370000 + 390000) / 3), // $380,000 (average of good comps)
        trueRepairs: 70000,
        repairOptions: [
            { value: 40000, isCorrect: false },
            { value: 70000, isCorrect: true },
            { value: 100000, isCorrect: false },
            { value: 125000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((380000 + 370000 + 390000) / 3)) - (2 * 70000) - 10000), // $192,000
        comps: [
            { id: 'A', price: 380000, date: '1 month ago', condition: 'Similar size, great ARV.', isGood: true },
            { id: 'B', price: 450000, date: '2 weeks ago', condition: 'Significantly larger lot and pool (exclude).', isGood: false },
            { id: 'C', price: 370000, date: '1 week ago', condition: 'Solid ARV comp.', isGood: true },
            { id: 'D', price: 390000, date: '3 months ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'E', price: 250000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'F', price: 300000, date: '6 months ago', condition: 'As-is investor sale.', isGood: false } 
        ]
    },
    // 21. Light Cosmetic, Investor Special (Mid ARV, Low Rehab)
    {
        id: 21,
        address: "42 Market Square",
        beds: 2, baths: 1, sqFt: 1050,
        condition: "Ready to rent but needs new paint and carpet to maximize rent rate. Perfect buy-and-hold.",
        trueARV: Math.round((205000 + 215000 + 210000) / 3), // $210,000 (average of good comps)
        trueRepairs: 20000,
        repairOptions: [
            { value: 12000, isCorrect: false },
            { value: 20000, isCorrect: true },
            { value: 30000, isCorrect: false },
            { value: 35000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((205000 + 215000 + 210000) / 3)) - (2 * 20000) - 10000), // $139,000
        comps: [
            { id: 'A', price: 205000, date: '1 month ago', condition: 'Similar condition, good ARV.', isGood: true },
            { id: 'B', price: 230000, date: '2 weeks ago', condition: 'Fully updated kitchen (adjust down).', isGood: false },
            { id: 'C', price: 215000, date: '1 week ago', condition: 'Excellent comp.', isGood: true },
            { id: 'D', price: 180000, date: '3 months ago', condition: 'Sold by family, low price.', isGood: false },
            { id: 'E', price: 210000, date: '4 months ago', condition: 'Solid ARV match.', isGood: true },
            { id: 'F', price: 150000, date: '1 year ago', condition: 'Too old.', isGood: false } 
        ]
    },
    // 22. Foundation Issues (Mid-High ARV, Extremely High Rehab)
    {
        id: 22,
        address: "100 Shakey Ground Rd",
        beds: 4, baths: 3, sqFt: 2400,
        condition: "Major foundation issues. Requires $70k in structural work plus cosmetic updates.",
        trueARV: Math.round((490000 + 520000 + 505000) / 3), // $505,000 (average of good comps)
        trueRepairs: 110000,
        repairOptions: [
            { value: 65000, isCorrect: false },
            { value: 110000, isCorrect: true },
            { value: 155000, isCorrect: false },
            { value: 200000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((490000 + 520000 + 505000) / 3)) - (2 * 110000) - 10000), // $224,500
        comps: [
            { id: 'A', price: 490000, date: '1 week ago', condition: 'Similar home, strong ARV.', isGood: true },
            { id: 'B', price: 520000, date: '1 month ago', condition: 'High-end remodel, top ARV.', isGood: true },
            { id: 'C', price: 400000, date: '3 months ago', condition: 'Sold with foundation issues (ignore).', isGood: false },
            { id: 'D', price: 505000, date: '2 weeks ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 600000, date: '1 year ago', condition: '4,000 sq ft home (ignore).', isGood: false },
            { id: 'F', price: 450000, date: '6 months ago', condition: 'As-is investor sale.', isGood: false } 
        ]
    },
    // 23. Vacant Lot Potential (High ARV, Low Rehab)
    {
        id: 23,
        address: "303 Infill Street",
        beds: 3, baths: 2, sqFt: 1500,
        condition: "Small lot, high price/sq ft area. Needs quick light cosmetic updates to flip fast.",
        trueARV: Math.round((590000 + 550000 + 585000) / 3), // $575,000 (average of good comps)
        trueRepairs: 25000,
        repairOptions: [
            { value: 15000, isCorrect: false },
            { value: 25000, isCorrect: true },
            { value: 35000, isCorrect: false },
            { value: 45000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((590000 + 550000 + 585000) / 3)) - (2 * 25000) - 10000), // $457,500
        comps: [
            { id: 'A', price: 590000, date: '1 month ago', condition: 'Similar size, perfect comp.', isGood: true },
            { id: 'B', price: 550000, date: '3 months ago', condition: 'Dated interior, lowest ARV comp.', isGood: true },
            { id: 'C', price: 650000, date: '2 weeks ago', condition: 'Larger lot, adjust down.', isGood: false },
            { id: 'D', price: 585000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 450000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'F', price: 500000, date: '6 months ago', condition: '3 story home (ignore).', isGood: false } 
        ]
    },
    // 24. Full Gut, Large Home (High ARV, Very High Rehab)
    {
        id: 24,
        address: "777 Money Pit Mansion",
        beds: 5, baths: 4, sqFt: 3500,
        condition: "Requires total gut. All systems, windows, roof, and interior must be new.",
        trueARV: Math.round((920000 + 850000 + 900000) / 3), // $890,000 (average of good comps)
        trueRepairs: 180000,
        repairOptions: [
            { value: 110000, isCorrect: false },
            { value: 180000, isCorrect: true },
            { value: 250000, isCorrect: false },
            { value: 325000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((920000 + 850000 + 900000) / 3)) - (2 * 180000) - 10000), // $431,000
        comps: [
            { id: 'A', price: 920000, date: '1 month ago', condition: 'Top comp, high end.', isGood: true },
            { id: 'B', price: 850000, date: '3 months ago', condition: 'Standard finishes, solid ARV.', isGood: true },
            { id: 'C', price: 900000, date: '2 weeks ago', condition: 'Excellent match to true ARV.', isGood: true },
            { id: 'D', price: 1100000, date: '1 year ago', condition: 'Luxury custom build (ignore).', isGood: false },
            { id: 'E', price: 700000, date: '6 months ago', condition: 'As-is investor sale.', isGood: false },
            { id: 'F', price: 800000, date: '1 year ago', condition: 'Too old.', isGood: false } 
        ]
    },
    // 25. Minor Cosmetic Only (Low ARV, Very Low Rehab)
    {
        id: 25,
        address: "100 Happy Trails Ln",
        beds: 2, baths: 1, sqFt: 850,
        condition: "Move-in ready condition. Needs only fresh exterior paint and minor landscaping.",
        trueARV: Math.round((165000 + 155000 + 160000) / 3), // $160,000 (average of good comps)
        trueRepairs: 8000,
        repairOptions: [
            { value: 5000, isCorrect: false },
            { value: 8000, isCorrect: true },
            { value: 11000, isCorrect: false },
            { value: 14000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((165000 + 155000 + 160000) / 3)) - (2 * 8000) - 10000), // $118,000
        comps: [
            { id: 'A', price: 165000, date: '1 week ago', condition: 'Perfect match, ideal ARV.', isGood: true },
            { id: 'B', price: 155000, date: '3 weeks ago', condition: 'Good comp, slight adjustment for age.', isGood: true },
            { id: 'C', price: 200000, date: '2 months ago', condition: 'Large garage added (exclude).', isGood: false },
            { id: 'D', price: 160000, date: '2 months ago', condition: 'Solid match to true ARV.', isGood: true },
            { id: 'E', price: 100000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'F', price: 130000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 26. Bad Electrical/Plumbing (Mid-High ARV, High Rehab)
    {
        id: 26,
        address: "44 Sparky Street",
        beds: 3, baths: 2, sqFt: 1700,
        condition: "Kitchen and baths are fine, but the entire electrical and plumbing system must be replaced.",
        trueARV: Math.round((375000 + 400000 + 385000) / 3), // $386,666 (average of good comps)
        trueRepairs: 85000,
        repairOptions: [
            { value: 50000, isCorrect: false },
            { value: 85000, isCorrect: true },
            { value: 120000, isCorrect: false },
            { value: 155000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((375000 + 400000 + 385000) / 3)) - (2 * 85000) - 10000), // $167,999
        comps: [
            { id: 'A', price: 375000, date: '1 month ago', condition: 'Similar size, good ARV.', isGood: true },
            { id: 'B', price: 400000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 385000, date: '1 week ago', condition: 'Excellent recent comp.', isGood: true },
            { id: 'D', price: 300000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'E', price: 450000, date: '3 months ago', condition: '4 bed, much larger.', isGood: false },
            { id: 'F', price: 320000, date: '6 months ago', condition: 'Investor as-is.', isGood: false } 
        ]
    },
    // 27. High ARV, Needs Cosmetic (High ARV, Low-Mid Rehab)
    {
        id: 27,
        address: "909 Vista Point",
        beds: 4, baths: 3, sqFt: 2800,
        condition: "Luxury neighborhood. Needs cosmetic refresh of kitchen and baths to reach top market value.",
        trueARV: Math.round((730000 + 680000 + 725000) / 3), // $711,666 (average of good comps)
        trueRepairs: 45000,
        repairOptions: [
            { value: 25000, isCorrect: false },
            { value: 45000, isCorrect: true },
            { value: 65000, isCorrect: false },
            { value: 80000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((730000 + 680000 + 725000) / 3)) - (2 * 45000) - 10000), // $540,499
        comps: [
            { id: 'A', price: 730000, date: '1 week ago', condition: 'Highest comp, good ARV target.', isGood: true },
            { id: 'B', price: 680000, date: '2 months ago', condition: 'Dated interior, lowest ARV comp.', isGood: true },
            { id: 'C', price: 725000, date: '3 weeks ago', condition: 'Perfect match, ideal ARV.', isGood: true },
            { id: 'D', price: 800000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'E', price: 550000, date: '6 months ago', condition: 'Investor as-is.', isGood: false },
            { id: 'F', price: 900000, date: '2 months ago', condition: 'New construction (ignore).', isGood: false } 
        ]
    },
    // 28. Garage Conversion Opportunity (Mid ARV, Mid Rehab)
    {
        id: 28,
        address: "505 Corner Plot",
        beds: 3, baths: 2, sqFt: 1350,
        condition: "Garage can be converted to an extra bedroom/office (estimated $20k). Needs full interior update.",
        trueARV: Math.round((325000 + 340000 + 335000) / 3), // $333,333 (average of good comps)
        trueRepairs: 55000,
        repairOptions: [
            { value: 35000, isCorrect: false },
            { value: 55000, isCorrect: true },
            { value: 75000, isCorrect: false },
            { value: 100000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((325000 + 340000 + 335000) / 3)) - (2 * 55000) - 10000), // $179,999
        comps: [
            { id: 'A', price: 325000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 340000, date: '2 weeks ago', condition: 'Includes garage conversion (good ARV).', isGood: true },
            { id: 'C', price: 250000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 335000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 400000, date: '3 months ago', condition: '4 bed, much larger.', isGood: false },
            { id: 'F', price: 280000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 29. Tiny Home, High Price/SqFt (Low ARV, Low Rehab)
    {
        id: 29,
        address: "88 Little Cottage",
        beds: 1, baths: 1, sqFt: 500,
        condition: "Micro unit in a trendy area. Needs minor cosmetic updates only.",
        trueARV: Math.round((185000 + 200000 + 195000) / 3), // $193,333 (average of good comps)
        trueRepairs: 15000,
        repairOptions: [
            { value: 9000, isCorrect: false },
            { value: 15000, isCorrect: true },
            { value: 20000, isCorrect: false },
            { value: 25000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((185000 + 200000 + 195000) / 3)) - (2 * 15000) - 10000), // $133,999
        comps: [
            { id: 'A', price: 185000, date: '1 week ago', condition: 'Identical unit, reliable.', isGood: true },
            { id: 'B', price: 200000, date: '1 month ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 250000, date: '2 months ago', condition: 'Large yard, subject has small patio.', isGood: false },
            { id: 'D', price: 195000, date: '3 weeks ago', condition: 'Best recent comp.', isGood: true },
            { id: 'E', price: 150000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'F', price: 100000, date: '6 months ago', condition: 'As-is investor sale.', isGood: false } 
        ]
    },
    // 30. High Risk, High Reward (Mid-High ARV, Very High Rehab)
    {
        id: 30,
        address: "700 Cliffside View",
        beds: 5, baths: 3, sqFt: 2800,
        condition: "High-value area, but house is completely dilapidated. Full structural, system, and cosmetic gut required.",
        trueARV: Math.round((700000 + 650000 + 670000) / 3), // $673,333 (average of good comps)
        trueRepairs: 150000,
        repairOptions: [
            { value: 90000, isCorrect: false },
            { value: 150000, isCorrect: true },
            { value: 210000, isCorrect: false },
            { value: 270000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((700000 + 650000 + 670000) / 3)) - (2 * 150000) - 10000), // $295,999
        comps: [
            { id: 'A', price: 700000, date: '1 month ago', condition: 'Fully renovated, excellent ARV.', isGood: true },
            { id: 'B', price: 650000, date: '2 months ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'C', price: 800000, date: '1 week ago', condition: 'New construction (ignore).', isGood: false },
            { id: 'D', price: 670000, date: '3 weeks ago', condition: 'Best recent comp.', isGood: true },
            { id: 'E', price: 500000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'F', price: 400000, date: '6 months ago', condition: 'As-is investor sale.', isGood: false } 
        ]
    },
    // 31. Out of State Investor Special (Low ARV, Mid Rehab)
    {
        id: 31,
        address: "420 Rust Belt Way",
        beds: 3, baths: 1, sqFt: 1150,
        condition: "Needs full kitchen, bath, and new flooring/paint. All systems functioning but old.",
        trueARV: Math.round((135000 + 150000 + 140000) / 3), // $141,666 (average of good comps)
        trueRepairs: 35000,
        repairOptions: [
            { value: 20000, isCorrect: false },
            { value: 35000, isCorrect: true },
            { value: 50000, isCorrect: false },
            { value: 65000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((135000 + 150000 + 140000) / 3)) - (2 * 35000) - 10000), // $47,499
        comps: [
            { id: 'A', price: 135000, date: '1 month ago', condition: 'Similar condition, good ARV.', isGood: true },
            { id: 'B', price: 150000, date: '2 weeks ago', condition: 'High end of comp range.', isGood: true },
            { id: 'C', price: 180000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 140000, date: '1 week ago', condition: 'Perfect match to true ARV.', isGood: true },
            { id: 'E', price: 100000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false },
            { id: 'F', price: 200000, date: '3 months ago', condition: '4 bed, much larger.', isGood: false } 
        ]
    },
    // 32. Standard Flip, Quick Turn (Mid ARV, Low-Mid Rehab)
    {
        id: 32,
        address: "17 Good Deal St",
        beds: 3, baths: 2, sqFt: 1550,
        condition: "Needs new kitchen counters/appliances, updated bathrooms, and fresh paint.",
        trueARV: Math.round((345000 + 320000 + 360000) / 3), // $341,666 (average of good comps)
        trueRepairs: 45000,
        repairOptions: [
            { value: 25000, isCorrect: false },
            { value: 45000, isCorrect: true },
            { value: 65000, isCorrect: false },
            { value: 80000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((345000 + 320000 + 360000) / 3)) - (2 * 45000) - 10000), // $207,499
        comps: [
            { id: 'A', price: 345000, date: '1 month ago', condition: 'Excellent comp.', isGood: true },
            { id: 'B', price: 320000, date: '3 weeks ago', condition: 'Slightly dated interior.', isGood: true },
            { id: 'C', price: 360000, date: '2 months ago', condition: 'Premium finishes, adjust down.', isGood: true },
            { id: 'D', price: 250000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'E', price: 400000, date: '6 months ago', condition: 'Next neighborhood over (ignore).', isGood: false },
            { id: 'F', price: 280000, date: '4 months ago', condition: 'As-is investor sale.', isGood: false } 
        ]
    },
    // 33. Rural, High Acreage (Mid ARV, Mid Rehab)
    {
        id: 33,
        address: "22 Farmland Way",
        beds: 4, baths: 2, sqFt: 2000,
        condition: "High acreage boosts ARV. House needs new roof and full cosmetic update.",
        trueARV: Math.round((410000 + 405000 + 395000) / 3), // $403,333 (average of good comps)
        trueRepairs: 60000,
        repairOptions: [
            { value: 35000, isCorrect: false },
            { value: 60000, isCorrect: true },
            { value: 85000, isCorrect: false },
            { value: 110000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((410000 + 405000 + 395000) / 3)) - (2 * 60000) - 10000), // $232,999
        comps: [
            { id: 'A', price: 410000, date: '2 weeks ago', condition: 'Similar acreage, good ARV.', isGood: true },
            { id: 'B', price: 350000, date: '1 month ago', condition: 'Low acreage (ignore).', isGood: false },
            { id: 'C', price: 405000, date: '1 week ago', condition: 'Excellent match to true ARV.', isGood: true },
            { id: 'D', price: 450000, date: '3 months ago', condition: 'Includes large barn (subject lacks one).', isGood: false },
            { id: 'E', price: 395000, date: '4 months ago', condition: 'Solid ARV comp.', isGood: true },
            { id: 'F', price: 300000, date: '1 year ago', condition: 'Too old.', isGood: false } 
        ]
    },
    // 34. Multi-Unit Property (High ARV, Mid Rehab)
    {
        id: 34,
        address: "98 Duplex Drive",
        beds: 6, baths: 3, sqFt: 2800,
        condition: "Duplex needs cosmetic updates in both units to maximize rents. Systems are functional.",
        trueARV: Math.round((600000 + 625000 + 550000) / 3), // $591,666 (average of good comps)
        trueRepairs: 70000,
        repairOptions: [
            { value: 40000, isCorrect: false },
            { value: 70000, isCorrect: true },
            { value: 100000, isCorrect: false },
            { value: 125000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((600000 + 625000 + 550000) / 3)) - (2 * 70000) - 10000), // $382,499
        comps: [
            { id: 'A', price: 600000, date: '1 month ago', condition: 'Similar duplex, good ARV.', isGood: true },
            { id: 'B', price: 630000, date: '2 weeks ago', condition: 'Triplex unit (ignore).', isGood: false },
            { id: 'C', price: 625000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'D', price: 550000, date: '4 months ago', condition: 'Dated interior, lowest ARV comp.', isGood: true },
            { id: 'E', price: 400000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'F', price: 700000, date: '3 months ago', condition: 'New construction townhome (ignore).', isGood: false } 
        ]
    },
    // 35. High Rehab, Small House (Low ARV, Mid-High Rehab)
    {
        id: 35,
        address: "12 Smallest Home Ln",
        beds: 2, baths: 1, sqFt: 700,
        condition: "Needs roof, electric panel, and full interior gut. Very old house.",
        trueARV: Math.round((125000 + 100000 + 120000) / 3), // $115,000 (average of good comps)
        trueRepairs: 45000,
        repairOptions: [
            { value: 25000, isCorrect: false },
            { value: 45000, isCorrect: true },
            { value: 65000, isCorrect: false },
            { value: 80000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((125000 + 100000 + 120000) / 3)) - (2 * 45000) - 10000), // $3,500
        comps: [
            { id: 'A', price: 125000, date: '1 month ago', condition: 'Similar size, perfect ARV.', isGood: true },
            { id: 'B', price: 100000, date: '3 weeks ago', condition: 'Dated interior, lowest ARV comp.', isGood: true },
            { id: 'C', price: 150000, date: '2 months ago', condition: 'Two-story unit (ignore).', isGood: false },
            { id: 'D', price: 120000, date: '1 week ago', condition: 'Excellent match to true ARV.', isGood: true },
            { id: 'E', price: 80000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'F', price: 60000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 36. Suburban Split-Level (Mid ARV, Mid Rehab)
    {
        id: 36,
        address: "77 Split Level Way",
        beds: 4, baths: 3, sqFt: 2200,
        condition: "Split-level style. Needs full cosmetic update and new HVAC system.",
        trueARV: Math.round((470000 + 440000 + 460000) / 3), // $456,666 (average of good comps)
        trueRepairs: 60000,
        repairOptions: [
            { value: 35000, isCorrect: false },
            { value: 60000, isCorrect: true },
            { value: 85000, isCorrect: false },
            { value: 110000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((470000 + 440000 + 460000) / 3)) - (2 * 60000) - 10000), // $280,999
        comps: [
            { id: 'A', price: 470000, date: '2 weeks ago', condition: 'Similar style, good ARV.', isGood: true },
            { id: 'B', price: 440000, date: '1 month ago', condition: 'Dated interior, lowest ARV comp.', isGood: true },
            { id: 'C', price: 500000, date: '3 months ago', condition: 'Pool added (ignore).', isGood: false },
            { id: 'D', price: 460000, date: '1 week ago', condition: 'Perfect match to true ARV.', isGood: true },
            { id: 'E', price: 350000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'F', price: 550000, date: '6 months ago', condition: 'New construction ranch (ignore).', isGood: false } 
        ]
    },
    // 37. High-End Custom Home (High ARV, Mid Rehab)
    {
        id: 37,
        address: "100 Gold Coast Dr",
        beds: 5, baths: 4, sqFt: 3500,
        condition: "Custom home, needs high-end kitchen and master bath renovation to match comps.",
        trueARV: Math.round((920000 + 1000000 + 960000) / 3), // $960,000 (average of good comps)
        trueRepairs: 100000,
        repairOptions: [
            { value: 60000, isCorrect: false },
            { value: 100000, isCorrect: true },
            { value: 140000, isCorrect: false },
            { value: 180000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((920000 + 1000000 + 960000) / 3)) - (2 * 100000) - 10000), // $654,000
        comps: [
            { id: 'A', price: 920000, date: '1 month ago', condition: 'Similar custom home, solid ARV.', isGood: true },
            { id: 'B', price: 1000000, date: '2 weeks ago', condition: 'Top end ARV comp.', isGood: true },
            { id: 'C', price: 1200000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 960000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 750000, date: '6 months ago', condition: 'As-is investor sale.', isGood: false },
            { id: 'F', price: 800000, date: '4 months ago', condition: '4 bed, much smaller.', isGood: false } 
        ]
    },
    // 38. Cosmetic, Quick Flip (Mid ARV, Low Rehab)
    {
        id: 38,
        address: "10 Fast Flip Lane",
        beds: 3, baths: 2, sqFt: 1400,
        condition: "Needs paint, flooring, and minor kitchen updates. Systems are all good.",
        trueARV: Math.round((295000 + 310000 + 305000) / 3), // $303,333 (average of good comps)
        trueRepairs: 30000,
        repairOptions: [
            { value: 18000, isCorrect: false },
            { value: 30000, isCorrect: true },
            { value: 40000, isCorrect: false },
            { value: 55000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((295000 + 310000 + 305000) / 3)) - (2 * 30000) - 10000), // $202,999
        comps: [
            { id: 'A', price: 295000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 310000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 250000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 305000, date: '1 week ago', condition: 'Excellent match to true ARV.', isGood: true },
            { id: 'E', price: 350000, date: '3 months ago', condition: '4 bed, much larger.', isGood: false },
            { id: 'F', price: 200000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 39. Massive Systems Failure (Mid ARV, Very High Rehab)
    {
        id: 39,
        address: "20 Systems Out Place",
        beds: 3, baths: 1, sqFt: 1100,
        condition: "HVAC, roof, and water heater all need immediate replacement. Light cosmetic needed.",
        trueARV: Math.round((265000 + 280000 + 275000) / 3), // $273,333 (average of good comps)
        trueRepairs: 80000,
        repairOptions: [
            { value: 50000, isCorrect: false },
            { value: 80000, isCorrect: true },
            { value: 110000, isCorrect: false },
            { value: 145000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((265000 + 280000 + 275000) / 3)) - (2 * 80000) - 10000), // $75,999
        comps: [
            { id: 'A', price: 265000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 280000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 220000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 275000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 300000, date: '3 months ago', condition: '4 bed, much larger.', isGood: false },
            { id: 'F', price: 200000, date: '6 months ago', condition: 'As-is investor sale.', isGood: false } 
        ]
    },
    // 40. High Sq Ft, Low Price/Sq Ft (Low ARV, Mid Rehab)
    {
        id: 40,
        address: "50 Wide Open Ranch",
        beds: 4, baths: 2, sqFt: 2500,
        condition: "Large ranch home. Needs full interior renovation. All systems function but are old.",
        trueARV: Math.round((350000 + 375000 + 360000) / 3), // $361,666 (average of good comps)
        trueRepairs: 60000,
        repairOptions: [
            { value: 35000, isCorrect: false },
            { value: 60000, isCorrect: true },
            { value: 85000, isCorrect: false },
            { value: 110000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((350000 + 375000 + 360000) / 3)) - (2 * 60000) - 10000), // $195,499
        comps: [
            { id: 'A', price: 350000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 375000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 300000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 360000, date: '1 week ago', condition: 'Excellent match to true ARV.', isGood: true },
            { id: 'E', price: 450000, date: '3 months ago', condition: 'New construction (ignore).', isGood: false },
            { id: 'F', price: 250000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 41. Starter Home, Major Upgrades (Mid ARV, Mid Rehab)
    {
        id: 41,
        address: "70 Suburban Starter",
        beds: 3, baths: 1, sqFt: 1100,
        condition: "Needs full kitchen, bath, and electrical upgrade to modern standards.",
        trueARV: Math.round((235000 + 250000 + 245000) / 3), // $243,333 (average of good comps)
        trueRepairs: 50000,
        repairOptions: [
            { value: 30000, isCorrect: false },
            { value: 50000, isCorrect: true },
            { value: 70000, isCorrect: false },
            { value: 90000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((235000 + 250000 + 245000) / 3)) - (2 * 50000) - 10000), // $108,999
        comps: [
            { id: 'A', price: 235000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 250000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 200000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 245000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 300000, date: '3 months ago', condition: '4 bed, much larger.', isGood: false },
            { id: 'F', price: 150000, date: '6 months ago', condition: 'As-is investor sale.', isGood: false } 
        ]
    },
    // 42. High-Density Townhome (Mid ARV, Low Rehab)
    {
        id: 42,
        address: "505 Townhouse Lane",
        beds: 3, baths: 2, sqFt: 1250,
        condition: "HOA handles exterior. Interior needs only light cosmetic updates (paint, carpet).",
        trueARV: Math.round((305000 + 320000 + 315000) / 3), // $313,333 (average of good comps)
        trueRepairs: 20000,
        repairOptions: [
            { value: 12000, isCorrect: false },
            { value: 20000, isCorrect: true },
            { value: 30000, isCorrect: false },
            { value: 35000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((305000 + 320000 + 315000) / 3)) - (2 * 20000) - 10000), // $231,999
        comps: [
            { id: 'A', price: 305000, date: '1 month ago', condition: 'Similar unit, good ARV.', isGood: true },
            { id: 'B', price: 320000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 280000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 315000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 350000, date: '3 months ago', condition: 'End unit with premium (ignore).', isGood: false },
            { id: 'F', price: 250000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 43. Old Systems, Clean Interior (Mid ARV, Mid-High Rehab)
    {
        id: 43,
        address: "99 Antique Ave",
        beds: 4, baths: 2, sqFt: 1900,
        condition: "Clean interior but requires new furnace, water heater, and electrical panel.",
        trueARV: Math.round((380000 + 400000 + 395000) / 3), // $391,666 (average of good comps)
        trueRepairs: 75000,
        repairOptions: [
            { value: 45000, isCorrect: false },
            { value: 75000, isCorrect: true },
            { value: 105000, isCorrect: false },
            { value: 135000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((380000 + 400000 + 395000) / 3)) - (2 * 75000) - 10000), // $192,499
        comps: [
            { id: 'A', price: 380000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 400000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 300000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 395000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 450000, date: '3 months ago', condition: 'New construction (ignore).', isGood: false },
            { id: 'F', price: 320000, date: '6 months ago', condition: 'As-is investor sale.', isGood: false } 
        ]
    },
    // 44. Low-End, High Volume Area (Low ARV, Mid Rehab)
    {
        id: 44,
        address: "70 Cheap Street",
        beds: 2, baths: 1, sqFt: 800,
        condition: "Needs full interior renovation (kitchen, bath, flooring). High volume turnover area.",
        trueARV: Math.round((125000 + 135000 + 130000) / 3), // $130,000 (average of good comps)
        trueRepairs: 40000,
        repairOptions: [
            { value: 25000, isCorrect: false },
            { value: 40000, isCorrect: true },
            { value: 55000, isCorrect: false },
            { value: 70000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((125000 + 135000 + 130000) / 3)) - (2 * 40000) - 10000), // $27,000
        comps: [
            { id: 'A', price: 125000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 135000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 100000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 130000, date: '1 week ago', condition: 'Excellent match to true ARV.', isGood: true },
            { id: 'E', price: 150000, date: '3 months ago', condition: '3 bed, much larger.', isGood: false },
            { id: 'F', price: 80000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 45. Cosmetic Fix, High ARV (High ARV, Low Rehab)
    {
        id: 45,
        address: "20 Millionaire Row",
        beds: 4, baths: 3, sqFt: 3000,
        condition: "High-end neighborhood. Needs cosmetic refresh of master bath and kitchen to maximize ARV.",
        trueARV: Math.round((780000 + 820000 + 810000) / 3), // $803,333 (average of good comps)
        trueRepairs: 50000,
        repairOptions: [
            { value: 30000, isCorrect: false },
            { value: 50000, isCorrect: true },
            { value: 70000, isCorrect: false },
            { value: 90000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((780000 + 820000 + 810000) / 3)) - (2 * 50000) - 10000), // $612,999
        comps: [
            { id: 'A', price: 780000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 820000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 900000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 810000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 600000, date: '6 months ago', condition: 'As-is investor sale.', isGood: false },
            { id: 'F', price: 500000, date: '4 months ago', condition: '3 bed, much smaller.', isGood: false } 
        ]
    },
    // 46. Deferred Maintenance Special (Mid ARV, Mid-High Rehab)
    {
        id: 46,
        address: "100 Backlog Blvd",
        beds: 3, baths: 2, sqFt: 1600,
        condition: "Roof is old, needs full interior renovation and new systems (HVAC, water heater).",
        trueARV: Math.round((315000 + 330000 + 325000) / 3), // $323,333 (average of good comps)
        trueRepairs: 70000,
        repairOptions: [
            { value: 40000, isCorrect: false },
            { value: 70000, isCorrect: true },
            { value: 100000, isCorrect: false },
            { value: 125000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((315000 + 330000 + 325000) / 3)) - (2 * 70000) - 10000), // $140,999
        comps: [
            { id: 'A', price: 315000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 330000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 250000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 325000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 400000, date: '3 months ago', condition: '4 bed, much larger.', isGood: false },
            { id: 'F', price: 200000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 47. Small Ranch Home (Low ARV, Low-Mid Rehab)
    {
        id: 47,
        address: "77 Ranch House Rd",
        beds: 2, baths: 1, sqFt: 900,
        condition: "Ranch style. Needs new flooring, paint, and minor kitchen updates.",
        trueARV: Math.round((175000 + 185000 + 180000) / 3), // $180,000 (average of good comps)
        trueRepairs: 25000,
        repairOptions: [
            { value: 15000, isCorrect: false },
            { value: 25000, isCorrect: true },
            { value: 35000, isCorrect: false },
            { value: 45000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((175000 + 185000 + 180000) / 3)) - (2 * 25000) - 10000), // $102,000
        comps: [
            { id: 'A', price: 175000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 185000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 150000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 180000, date: '1 week ago', condition: 'Excellent match to true ARV.', isGood: true },
            { id: 'E', price: 220000, date: '3 months ago', condition: '3 bed, much larger.', isGood: false },
            { id: 'F', price: 120000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 48. High Volume, Low Price Area (Low ARV, Mid Rehab)
    {
        id: 48,
        address: "22 Busy Street",
        beds: 3, baths: 1, sqFt: 1200,
        condition: "Needs full interior renovation. High volume rental area.",
        trueARV: Math.round((145000 + 155000 + 150000) / 3), // $150,000 (average of good comps)
        trueRepairs: 45000,
        repairOptions: [
            { value: 25000, isCorrect: false },
            { value: 45000, isCorrect: true },
            { value: 65000, isCorrect: false },
            { value: 80000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((145000 + 155000 + 150000) / 3)) - (2 * 45000) - 10000), // $35,000
        comps: [
            { id: 'A', price: 145000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 155000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 110000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 150000, date: '1 week ago', condition: 'Excellent match to true ARV.', isGood: true },
            { id: 'E', price: 180000, date: '3 months ago', condition: '4 bed, much larger.', isGood: false },
            { id: 'F', price: 90000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    },
    // 49. Large Lot, Suburbia (Mid ARV, Mid Rehab)
    {
        id: 49,
        address: "33 Acreage Drive",
        beds: 4, baths: 3, sqFt: 2100,
        condition: "Large lot, needs full cosmetic update and new roof.",
        trueARV: Math.round((420000 + 440000 + 435000) / 3), // $431,666 (average of good comps)
        trueRepairs: 60000,
        repairOptions: [
            { value: 35000, isCorrect: false },
            { value: 60000, isCorrect: true },
            { value: 85000, isCorrect: false },
            { value: 110000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((420000 + 440000 + 435000) / 3)) - (2 * 60000) - 10000), // $258,499
        comps: [
            { id: 'A', price: 420000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 440000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 350000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 435000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 500000, date: '3 months ago', condition: 'New construction (ignore).', isGood: false },
            { id: 'F', price: 380000, date: '6 months ago', condition: 'As-is investor sale.', isGood: false } 
        ]
    },
    // 50. Final Heavy Rehab (Mid ARV, Very High Rehab)
    {
        id: 50,
        address: "100 Finish Line Way",
        beds: 3, baths: 2, sqFt: 1500,
        condition: "Full gut job. Needs new roof, all systems, and total interior renovation.",
        trueARV: Math.round((295000 + 310000 + 305000) / 3), // $303,333 (average of good comps)
        trueRepairs: 100000,
        repairOptions: [
            { value: 60000, isCorrect: false },
            { value: 100000, isCorrect: true },
            { value: 140000, isCorrect: false },
            { value: 180000, isCorrect: false },
        ],
        trueMAO: Math.round((0.90 * Math.round((295000 + 310000 + 305000) / 3)) - (2 * 100000) - 10000), // $62,999
        comps: [
            { id: 'A', price: 295000, date: '1 month ago', condition: 'Similar size, solid ARV.', isGood: true },
            { id: 'B', price: 310000, date: '2 weeks ago', condition: 'High-end finishes, adjust down.', isGood: true },
            { id: 'C', price: 250000, date: '1 year ago', condition: 'Too old.', isGood: false },
            { id: 'D', price: 305000, date: '1 week ago', condition: 'Excellent recent sale.', isGood: true },
            { id: 'E', price: 350000, date: '3 months ago', condition: '4 bed, much larger.', isGood: false },
            { id: 'F', price: 200000, date: '6 months ago', condition: 'Foreclosure sale.', isGood: false } 
        ]
    }
];

let currentProperty = null;
let currentPropertyIndex = 0;

// New global variables for enhancements
let gameStats = {
    scores: [],
    totalDeals: 0,
    avgScore: 0,
    bestScore: 0
};
let timerInterval = null;
let timeRemaining = 120;
let isTimedMode = false;
let hintUsed = false;
let hintPenalty = 0;

// Helper function to format currency
const formatCurrency = (amount) => {
    // Handle potential negative or zero MAO
    if (amount < 0) {
        return `($${Math.abs(amount).toLocaleString()})`;
    }
    return `$${amount.toLocaleString()}`;
};

// Function to load the current property data into the HTML
function loadProperty(property) {
    currentProperty = property;
    
    // Reset inputs and visibility
    document.getElementById('arv-form').reset();
    document.getElementById('results').classList.add('hidden');
    document.getElementById('feedback').className = '';
    document.getElementById('player-mao').textContent = '--';
    document.getElementById('final-score').textContent = '-- / 100';
    
    // Disable the "Next Challenge" button until the player submits this deal
    document.getElementById('next-challenge-btn').disabled = true;

    // Update Property Details
    document.getElementById('property-id').textContent = `${property.id}`;
    document.getElementById('property-address').textContent = property.address;
    document.getElementById('property-beds').textContent = property.beds;
    document.getElementById('property-baths').textContent = property.baths;
    document.getElementById('property-sqft').textContent = property.sqFt.toLocaleString();
    document.getElementById('property-condition').textContent = property.condition;

    // Display Repair Options (if available)
    const repairOptionsContainer = document.getElementById('repair-options');
    const repairOptionsSection = document.getElementById('repair-options-section');
    const repairInput = document.getElementById('input-repairs');
    const repairInputGroup = repairInput?.parentElement;

    if (property.repairOptions && repairOptionsContainer) {
        // Show repair options, hide manual input
        repairOptionsContainer.innerHTML = '';

        // Shuffle the options to randomize order (prevents pattern recognition)
        const shuffledOptions = [...property.repairOptions].sort(() => Math.random() - 0.5);

        shuffledOptions.forEach((option, index) => {
            const label = document.createElement('label');
            label.innerHTML = `
                <input type="radio" name="repair-estimate" value="${option.value}" required>
                ${formatCurrency(option.value)}
            `;
            repairOptionsContainer.appendChild(label);
        });
        if (repairOptionsSection) repairOptionsSection.style.display = 'block';
        if (repairInputGroup) repairInputGroup.style.display = 'none';
        if (repairInput) repairInput.removeAttribute('required');
    } else {
        // Hide repair options, show manual input
        if (repairOptionsSection) repairOptionsSection.style.display = 'none';
        if (repairInputGroup) repairInputGroup.style.display = 'block';
        if (repairInput) repairInput.setAttribute('required', '');
    }

    // Update Comps List
    const compsList = document.getElementById('comps-list');
    compsList.innerHTML = ''; // Clear previous comps
    property.comps.forEach(comp => {
        const li = document.createElement('li');
        li.innerHTML = `
            <strong>Comp ${comp.id}:</strong> ${formatCurrency(comp.price)} | ${comp.date}<br>
            <span style="color: #b0b0b0;">${comp.condition}</span>
        `;
        // Note: comp.isGood is tracked internally for scoring but not shown to user
        compsList.appendChild(li);
    });

    // Populate Comp Checkboxes
    const compCheckboxes = document.getElementById('comp-checkboxes');
    compCheckboxes.innerHTML = ''; // Clear previous checkboxes
    property.comps.forEach(comp => {
        const label = document.createElement('label');
        label.innerHTML = `
            <input type="checkbox" name="selected-comps" value="${comp.id}">
            Comp ${comp.id}
        `;
        compCheckboxes.appendChild(label);
    });

    // Reset hint system
    hintUsed = false;
    hintPenalty = 0;
    document.getElementById('hint-btn').disabled = false;
    document.getElementById('hint-btn').textContent = 'üí° Use Hint (-10 points)';

    // Start timer if in timed mode
    if (isTimedMode) {
        startTimer();
    }

    // Add fade-in animation
    fadeInElement(document.querySelector('.container'));
}

// Function to calculate score based on deviation
function calculateScore(playerValue, trueValue, tolerance) {
    const deviation = Math.abs(playerValue - trueValue);
    
    if (deviation <= tolerance) return 100; // Perfect score
    
    // Calculate score based on percentage deviation, capped at 100
    // Max score loss is 100 points, over a range of 2.5x the tolerance
    // Score loss formula: (deviation / (tolerance * 2.5)) * 100
    
    const maxDeviationForZeroScore = tolerance * 2.5;
    if (deviation >= maxDeviationForZeroScore) return 0;
    
    const score = 100 - (deviation / maxDeviationForZeroScore) * 100;
    return Math.round(Math.max(0, score)); // Ensure score is not negative
}

// Function to determine overall grade
function getGrade(score) {
    if (score >= 90) return 'A+ (Excellent!)';
    if (score >= 80) return 'A (Great Job!)';
    if (score >= 70) return 'B (Solid Analysis)';
    if (score >= 60) return 'C (Needs Improvement)';
    return 'D (Off the Mark)';
}

// Function to provide detailed feedback
function getDetailedFeedback(arvScore, repairsScore, compScore, maoScore, finalScore) {
    let feedbackHTML = '';
    let feedbackClass = 'feedback-bad'; // Default class

    // Comp Selection Feedback
    if (compScore >= 90) {
        feedbackHTML += '<p><strong>Comp Selection:</strong> Excellent! You identified the most relevant comparable properties. üéØ</p>';
    } else if (compScore >= 70) {
        feedbackHTML += '<p><strong>Comp Selection:</strong> Good. You selected mostly relevant comps, but may have included some outliers or missed key ones.</p>';
    } else {
        feedbackHTML += '<p><strong>Comp Selection:</strong> Needs Work. Review which comps are most similar (date, condition, features). ‚ö†Ô∏è</p>';
    }

    // ARV Feedback
    if (arvScore >= 90) {
        feedbackHTML += '<p><strong>ARV Estimate:</strong> Excellent! Your ARV estimate was spot on. üéØ</p>';
    } else if (arvScore >= 70) {
        feedbackHTML += '<p><strong>ARV Estimate:</strong> Good. Your ARV was close, but you may have been slightly swayed by the highest or lowest comps.</p>';
    } else {
        feedbackHTML += '<p><strong>ARV Estimate:</strong> Needs Work. Re-examine the comps (especially the most recent and relevant ones) for a better ARV. ‚ö†Ô∏è</p>';
    }

    // Repairs Feedback
    if (repairsScore >= 90) {
        feedbackHTML += '<p><strong>Repairs Estimate:</strong> Excellent! You nailed the repair budget based on the property condition. üéØ</p>';
    } else if (repairsScore >= 70) {
        feedbackHTML += '<p><strong>Repairs Estimate:</strong> Good. Your repair budget was reasonable, but check for missed big-ticket items (Roof, HVAC, Foundation).</p>';
    } else {
        feedbackHTML += '<p><strong>Repairs Estimate:</strong> Needs Work. Your repair budget was significantly off. Be sure to account for all major systems and full cosmetic overhaul if needed. ‚ö†Ô∏è</p>';
    }

    // MAO Calculation Feedback
    if (maoScore >= 90) {
        feedbackHTML += '<p><strong>MAO Calculation:</strong> Excellent! Your MAO calculation was accurate. üéØ</p>';
    } else if (maoScore >= 70) {
        feedbackHTML += '<p><strong>MAO Calculation:</strong> Good. Your MAO was close, but double-check your math and formula application.</p>';
    } else {
        feedbackHTML += '<p><strong>MAO Calculation:</strong> Needs Work. Review the MAO formula: (ARV √ó 90%) - (Repairs √ó 2) - $10,000. ‚ö†Ô∏è</p>';
    }

    // Final Grade/Overall Feedback
    if (finalScore >= 90) {
        feedbackHTML += '<p style="margin-top: 10px;"><strong>Overall Grade:</strong> You are a highly accurate wholesaler. Keep making offers like this! üí™</p>';
        feedbackClass = 'feedback-good';
    } else if (finalScore >= 70) {
        feedbackHTML += '<p style="margin-top: 10px;"><strong>Overall Grade:</strong> A solid, profitable offer. You are ready to close deals. ‚úì</p>';
        feedbackClass = 'feedback-good';
    } else {
        feedbackHTML += '<p style="margin-top: 10px;"><strong>Overall Grade:</strong> Caution! This offer could have left too much money on the table, or worse, resulted in an unprofitable deal for your buyer. üö´</p>';
        feedbackClass = 'feedback-bad';
    }

    const feedbackElement = document.getElementById('feedback');
    feedbackElement.innerHTML = feedbackHTML;
    feedbackElement.className = feedbackClass;
}

// Main logic for form submission
document.getElementById('arv-form').addEventListener('submit', function(e) {
    e.preventDefault();

    if (!currentProperty) return;

    // 1. Get Player Inputs
    const playerARV = parseInt(document.getElementById('input-arv').value);

    // Get player repairs - either from radio buttons or input field
    let playerRepairs;
    if (currentProperty.repairOptions) {
        const selectedRepair = document.querySelector('input[name="repair-estimate"]:checked');
        playerRepairs = selectedRepair ? parseInt(selectedRepair.value) : 0;
    } else {
        playerRepairs = parseInt(document.getElementById('input-repairs').value);
    }

    const playerMAO = parseInt(document.getElementById('input-mao').value);

    // Get selected comps
    const selectedComps = Array.from(document.querySelectorAll('input[name="selected-comps"]:checked'))
        .map(cb => cb.value);

    // 2. Score Calculations
    // Define a percentage-based tolerance for scoring
    const ARV_TOLERANCE = currentProperty.trueARV * 0.05; // 5% tolerance on ARV
    const MAO_TOLERANCE = currentProperty.trueMAO * 0.10; // 10% tolerance on MAO

    // Repairs scoring depends on whether property has repairOptions
    let repairsScore;
    if (currentProperty.repairOptions) {
        // For repair options, it's binary: correct = 100, incorrect = 0
        const correctRepairOption = currentProperty.repairOptions.find(opt => opt.isCorrect);
        repairsScore = (playerRepairs === correctRepairOption.value) ? 100 : 0;
    } else {
        // For manual input, use tolerance-based scoring
        const REPAIRS_TOLERANCE = currentProperty.trueRepairs * 0.20; // 20% tolerance on Repairs
        repairsScore = calculateScore(playerRepairs, currentProperty.trueRepairs, REPAIRS_TOLERANCE);
    }

    const arvScore = calculateScore(playerARV, currentProperty.trueARV, ARV_TOLERANCE);
    const maoScore = calculateScore(playerMAO, currentProperty.trueMAO, MAO_TOLERANCE);

    // Calculate comp selection score
    const goodComps = currentProperty.comps.filter(c => c.isGood).map(c => c.id);
    const correctSelections = selectedComps.filter(id => goodComps.includes(id)).length;
    const incorrectSelections = selectedComps.filter(id => !goodComps.includes(id)).length;
    const missedGoodComps = goodComps.filter(id => !selectedComps.includes(id)).length;

    // Comp score: 100% if all good comps selected and no bad ones, penalize for mistakes
    let compScore = 100;
    compScore -= (incorrectSelections * 20); // -20 points per bad comp selected
    compScore -= (missedGoodComps * 15); // -15 points per good comp missed
    compScore = Math.max(0, compScore);

    // Final score is a weighted average
    let finalScore = Math.round((compScore * 0.2) + (arvScore * 0.3) + (repairsScore * 0.2) + (maoScore * 0.3));

    // Apply hint penalty
    finalScore = Math.max(0, finalScore - hintPenalty);
    const grade = getGrade(finalScore);

    // Stop timer if running
    stopTimer();

    // 4. Update Display
    document.getElementById('player-mao').textContent = formatCurrency(playerMAO);
    const scoreElement = document.getElementById('final-score');
    scoreElement.textContent = `${finalScore} / 100 (${grade})`;
    document.getElementById('results').classList.remove('hidden');

    // Show visual feedback on comp selection
    showCompFeedback(selectedComps, goodComps);

    // Record score to stats
    recordScore(finalScore);

    // Animate score display
    animateScore(scoreElement);

    // Show confetti for excellent scores
    if (finalScore >= 90) {
        showConfetti();
    }

    // Enable the "Next Challenge" button
    document.getElementById('next-challenge-btn').disabled = false;

    // Display True Values
    document.getElementById('true-arv').textContent = formatCurrency(currentProperty.trueARV);
    document.getElementById('true-repairs').textContent = formatCurrency(currentProperty.trueRepairs);
    document.getElementById('true-mao').textContent = formatCurrency(currentProperty.trueMAO);

    // 5. Provide Detailed Feedback
    getDetailedFeedback(arvScore, repairsScore, compScore, maoScore, finalScore);

    // Check for game end condition
    if (currentProperty.id === properties.length) {
        document.getElementById('next-challenge-btn').textContent = "Game Complete! View Final Stats";
        document.getElementById('next-challenge-btn').onclick = showFinalStats;
    }
});

// Function to advance to the next property
function loadNewProperty() {
    currentPropertyIndex++;
    if (currentPropertyIndex < properties.length) {
        loadProperty(properties[currentPropertyIndex]);
        window.scrollTo(0, 0); // Scroll to top for new deal
    } else {
        // This handles the end of the game
        showFinalStats();
    }
}

// Function to load a random property
function loadRandomProperty() {
    // Generate random index
    const randomIndex = Math.floor(Math.random() * properties.length);
    currentPropertyIndex = randomIndex;

    // Load the random property
    loadProperty(properties[currentPropertyIndex]);

    // Hide results and reset form
    document.getElementById('results').classList.add('hidden');
    document.getElementById('arv-form').reset();
    document.getElementById('next-challenge-btn').disabled = true;

    // Scroll to top for new deal
    window.scrollTo(0, 0);
}

// Function to handle the end of the game (Placeholder for future feature)
function showFinalStats() {
    alert("Congratulations, Apex Predator! ü¶à You have analyzed all 50 deals. Feature to show final stats is coming soon!");
    // You could redirect, reset the game, or display a complex modal here
    document.getElementById('next-challenge-btn').disabled = true;
    document.getElementById('next-challenge-btn').textContent = "Game Complete!";
}

// Initialization: Load the very first property when the page loads
// Initialization: Load the very first property when the page loads
document.addEventListener('DOMContentLoaded', function() {
    console.log('Page loaded, waiting for password...');
    console.log('Total properties:', properties.length);
    console.log('Current index:', currentPropertyIndex);

    // Load saved statistics
    loadStats();

    // Don't load property until password is entered
    // The checkPassword() function will handle initialization
});

// Calculator Functions
function appendCalc(value) {
    const display = document.getElementById('calc-display');
    if (display.value === '0' && value !== '.') {
        display.value = value;
    } else {
        display.value += value;
    }
}

function clearCalc() {
    document.getElementById('calc-display').value = '0';
}

function backspaceCalc() {
    const display = document.getElementById('calc-display');
    if (display.value.length > 1) {
        display.value = display.value.slice(0, -1);
    } else {
        display.value = '0';
    }
}

function calculateCalc() {
    const display = document.getElementById('calc-display');
    try {
        // Replace √ó with * for eval
        const expression = display.value.replace(/√ó/g, '*');
        const result = eval(expression);
        display.value = result;
    } catch (error) {
        display.value = 'Error';
        setTimeout(() => {
            display.value = '0';
        }, 1500);
    }
}


// ===== NEW FEATURES =====

// 1. PROGRESS TRACKING & STATISTICS
function loadStats() {
    const saved = localStorage.getItem('apexAnalyzerStats');
    if (saved) {
        gameStats = JSON.parse(saved);
        updateStatsDisplay();
    }
}

function saveStats() {
    localStorage.setItem('apexAnalyzerStats', JSON.stringify(gameStats));
}

function updateStatsDisplay() {
    document.getElementById('avg-score').textContent = gameStats.avgScore || '--';
    document.getElementById('best-score').textContent = gameStats.bestScore || '--';
}

function recordScore(score) {
    gameStats.scores.push(score);
    gameStats.totalDeals++;
    gameStats.avgScore = Math.round(gameStats.scores.reduce((a, b) => a + b, 0) / gameStats.scores.length);
    gameStats.bestScore = Math.max(gameStats.bestScore, score);
    saveStats();
    updateStatsDisplay();
}


// 2. TIMED CHALLENGE MODE
function startTimer() {
    timeRemaining = 120;
    updateTimerDisplay();
    document.getElementById('timer-display').classList.remove('hidden');

    timerInterval = setInterval(() => {
        timeRemaining--;
        updateTimerDisplay();

        if (timeRemaining <=  10) {
            document.getElementById('timer-value').classList.add('warning');
        }

        if (timeRemaining <= 0) {
            stopTimer();
            autoSubmitForm();
        }
    }, 1000);
}

function stopTimer() {
    if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
    }
    document.getElementById('timer-display').classList.add('hidden');
    document.getElementById('timer-value').classList.remove('warning');
}

function updateTimerDisplay() {
    document.getElementById('timer-value').textContent = timeRemaining;
}

function autoSubmitForm() {
    // Fill any empty required fields with 0 before auto-submitting
    const arvInput = document.getElementById('input-arv');
    const repairsInput = document.getElementById('input-repairs');
    const maoInput = document.getElementById('input-mao');

    if (!arvInput.value) arvInput.value = '0';

    // Handle repair options or input
    if (currentProperty.repairOptions) {
        const selectedRepair = document.querySelector('input[name="repair-estimate"]:checked');
        if (!selectedRepair) {
            // Select the first repair option by default
            const firstRepair = document.querySelector('input[name="repair-estimate"]');
            if (firstRepair) firstRepair.checked = true;
        }
    } else {
        if (!repairsInput.value) repairsInput.value = '0';
    }

    if (!maoInput.value) maoInput.value = '0';

    const submitBtn = document.getElementById('submit-btn');
    submitBtn.click();
}

// Timer mode toggle listener
document.getElementById('timed-mode-toggle').addEventListener('change', function(e) {
    isTimedMode = e.target.checked;
    if (!isTimedMode) {
        stopTimer();
    }
});


// 3. HINT SYSTEM
function useHint() {
    if (hintUsed || !currentProperty) return;

    const goodComps = currentProperty.comps.filter(c => c.isGood);
    if (goodComps.length === 0) return;

    // Select a random good comp
    const randomGoodComp = goodComps[Math.floor(Math.random() * goodComps.length)];

    // Find and highlight the checkbox label
    const checkboxes = document.querySelectorAll('input[name="selected-comps"]');
    checkboxes.forEach(cb => {
        if (cb.value === randomGoodComp.id) {
            cb.parentElement.classList.add('comp-hint');
        }
    });

    hintUsed = true;
    hintPenalty = 10;
    document.getElementById('hint-btn').disabled = true;
    document.getElementById('hint-btn').textContent = 'Hint Used ‚úì';
}


// 4. VISUAL FEEDBACK ON COMP SELECTION
function showCompFeedback(selectedComps, goodComps) {
    const checkboxes = document.querySelectorAll('input[name="selected-comps"]');

    checkboxes.forEach(cb => {
        const label = cb.parentElement;
        const compId = cb.value;

        // Remove previous classes
        label.classList.remove('comp-correct', 'comp-incorrect', 'comp-missed', 'comp-hint');

        if (selectedComps.includes(compId)) {
            if (goodComps.includes(compId)) {
                label.classList.add('comp-correct');
            } else {
                label.classList.add('comp-incorrect');
            }
        } else if (goodComps.includes(compId)) {
            label.classList.add('comp-missed');
        }
    });
}


// 5. ANIMATIONS
function animateScore(element) {
    element.classList.add('score-animate');

    // Animate counter from 0 to final value
    const finalValue = parseInt(element.textContent);
    let current = 0;
    const increment = Math.ceil(finalValue / 30);
    const timer = setInterval(() => {
        current += increment;
        if (current >= finalValue) {
            current = finalValue;
            clearInterval(timer);
        }
        element.textContent = current;
    }, 30);
}

function showConfetti() {
    const container = document.createElement('div');
    container.className = 'confetti-container';
    document.body.appendChild(container);

    const colors = ['#FFD700', '#FFA500', '#FF6347', '#4CAF50', '#2196F3', '#9C27B0'];

    for (let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDelay = Math.random() * 0.5 + 's';
        confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
        container.appendChild(confetti);
    }

    setTimeout(() => {
        document.body.removeChild(container);
    }, 4000);
}

function fadeInElement(element) {
    element.classList.add('fade-in');
    setTimeout(() => {
        element.classList.remove('fade-in');
    }, 500);
}
// ===== HOW TO PLAY MODAL =====
function openHowToPlayModal() {
    const modal = document.getElementById('how-to-play-modal');
    modal.classList.remove('hidden');
    modal.classList.add('fade-in');
    
    // Prevent body scroll when modal is open
    document.body.style.overflow = 'hidden';
}

function closeHowToPlayModal() {
    const modal = document.getElementById('how-to-play-modal');
    modal.classList.add('hidden');
    modal.classList.remove('fade-in');
    
    // Restore body scroll
    document.body.style.overflow = 'auto';
}

// Close modal when clicking outside of modal content
document.addEventListener('click', function(e) {
    const modal = document.getElementById('how-to-play-modal');
    if (e.target === modal) {
        closeHowToPlayModal();
    }
});

// Close modal with Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        const modal = document.getElementById('how-to-play-modal');
        if (!modal.classList.contains('hidden')) {
            closeHowToPlayModal();
        }
    }
});
    </script>
</body>
</html>
